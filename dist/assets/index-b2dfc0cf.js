var En=Object.defineProperty;var In=(n,r,i)=>r in n?En(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i;var At=(n,r,i)=>(In(n,typeof r!="symbol"?r+"":r,i),i);import{u as Cn,a as An,j as e,A as _n,b as g,T as Rn,c as w,F as st,I as dt,M as Tn,d as On,e as Zt,f as Tt,B as P,g as ae,H as Nn,h as Pr,S as cr,E as ft,i as lt,k as Lr,C as ye,L as Be,G as se,l as le,m as ce,n as Se,o as Dn,p as Wr,q as Te,D as ur,r as dr,s as fr,t as Ye,v as qt,w as er,x as ot,y as ke,z as Sr,J as hr,P as Bn,K as Qr,N as tr,O as rr,Q as nr,R as ir,U as mr,V as Un,W as Fn,X as Pn,Y as Ot,Z as kr,_ as Ln,$ as Er,a0 as gr,a1 as Ir,a2 as zr,a3 as Wn,a4 as Qn,a5 as kn,a6 as zn,a7 as jn,a8 as $n,a9 as jr,aa as Mn,ab as Kn}from"./mui-873dbdaf.js";import{c as Vn,r as y,R as Yn,a as Nt,d as _t,e as Gn}from"./vendor-17a83143.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const m of l)if(m.type==="childList")for(const p of m.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function i(l){const m={};return l.integrity&&(m.integrity=l.integrity),l.referrerPolicy&&(m.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?m.credentials="include":l.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(l){if(l.ep)return;l.ep=!0;const m=i(l);fetch(l.href,m)}})();var or={},Cr=Vn;or.createRoot=Cr.createRoot,or.hydrateRoot=Cr.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ct(){return ct=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},ct.apply(this,arguments)}var Fe;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Fe||(Fe={}));const Ar="popstate";function Jn(n){n===void 0&&(n={});function r(o,l){let{pathname:m,search:p,hash:S}=o.location;return sr("",{pathname:m,search:p,hash:S},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function i(o,l){return typeof l=="string"?l:$r(l)}return Xn(r,i,null,n)}function ve(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function vr(n,r){if(!n){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Hn(){return Math.random().toString(36).substr(2,8)}function _r(n,r){return{usr:n.state,key:n.key,idx:r}}function sr(n,r,i,o){return i===void 0&&(i=null),ct({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof r=="string"?Ge(r):r,{state:i,key:r&&r.key||o||Hn()})}function $r(n){let{pathname:r="/",search:i="",hash:o=""}=n;return i&&i!=="?"&&(r+=i.charAt(0)==="?"?i:"?"+i),o&&o!=="#"&&(r+=o.charAt(0)==="#"?o:"#"+o),r}function Ge(n){let r={};if(n){let i=n.indexOf("#");i>=0&&(r.hash=n.substr(i),n=n.substr(0,i));let o=n.indexOf("?");o>=0&&(r.search=n.substr(o),n=n.substr(0,o)),n&&(r.pathname=n)}return r}function Xn(n,r,i,o){o===void 0&&(o={});let{window:l=document.defaultView,v5Compat:m=!1}=o,p=l.history,S=Fe.Pop,v=null,I=E();I==null&&(I=0,p.replaceState(ct({},p.state,{idx:I}),""));function E(){return(p.state||{idx:null}).idx}function d(){S=Fe.Pop;let D=E(),F=D==null?null:D-I;I=D,v&&v({action:S,location:T.location,delta:F})}function b(D,F){S=Fe.Push;let z=sr(T.location,D,F);i&&i(z,D),I=E()+1;let q=_r(z,I),he=T.createHref(z);try{p.pushState(q,"",he)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;l.location.assign(he)}m&&v&&v({action:S,location:T.location,delta:1})}function W(D,F){S=Fe.Replace;let z=sr(T.location,D,F);i&&i(z,D),I=E();let q=_r(z,I),he=T.createHref(z);p.replaceState(q,"",he),m&&v&&v({action:S,location:T.location,delta:0})}function Q(D){let F=l.location.origin!=="null"?l.location.origin:l.location.href,z=typeof D=="string"?D:$r(D);return z=z.replace(/ $/,"%20"),ve(F,"No window.location.(origin|href) available to create URL for href: "+z),new URL(z,F)}let T={get action(){return S},get location(){return n(l,p)},listen(D){if(v)throw new Error("A history only accepts one active listener");return l.addEventListener(Ar,d),v=D,()=>{l.removeEventListener(Ar,d),v=null}},createHref(D){return r(l,D)},createURL:Q,encodeLocation(D){let F=Q(D);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:b,replace:W,go(D){return p.go(D)}};return T}var Rr;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Rr||(Rr={}));function Zn(n,r,i){return i===void 0&&(i="/"),qn(n,r,i,!1)}function qn(n,r,i,o){let l=typeof r=="string"?Ge(r):r,m=Vr(l.pathname||"/",i);if(m==null)return null;let p=Mr(n);ei(p);let S=null;for(let v=0;S==null&&v<p.length;++v){let I=di(m);S=ci(p[v],I,o)}return S}function Mr(n,r,i,o){r===void 0&&(r=[]),i===void 0&&(i=[]),o===void 0&&(o="");let l=(m,p,S)=>{let v={relativePath:S===void 0?m.path||"":S,caseSensitive:m.caseSensitive===!0,childrenIndex:p,route:m};v.relativePath.startsWith("/")&&(ve(v.relativePath.startsWith(o),'Absolute route path "'+v.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),v.relativePath=v.relativePath.slice(o.length));let I=ze([o,v.relativePath]),E=i.concat(v);m.children&&m.children.length>0&&(ve(m.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+I+'".')),Mr(m.children,r,E,I)),!(m.path==null&&!m.index)&&r.push({path:I,score:si(I,m.index),routesMeta:E})};return n.forEach((m,p)=>{var S;if(m.path===""||!((S=m.path)!=null&&S.includes("?")))l(m,p);else for(let v of Kr(m.path))l(m,p,v)}),r}function Kr(n){let r=n.split("/");if(r.length===0)return[];let[i,...o]=r,l=i.endsWith("?"),m=i.replace(/\?$/,"");if(o.length===0)return l?[m,""]:[m];let p=Kr(o.join("/")),S=[];return S.push(...p.map(v=>v===""?m:[m,v].join("/"))),l&&S.push(...p),S.map(v=>n.startsWith("/")&&v===""?"/":v)}function ei(n){n.sort((r,i)=>r.score!==i.score?i.score-r.score:li(r.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}const ti=/^:[\w-]+$/,ri=3,ni=2,ii=1,ai=10,oi=-2,Tr=n=>n==="*";function si(n,r){let i=n.split("/"),o=i.length;return i.some(Tr)&&(o+=oi),r&&(o+=ni),i.filter(l=>!Tr(l)).reduce((l,m)=>l+(ti.test(m)?ri:m===""?ii:ai),o)}function li(n,r){return n.length===r.length&&n.slice(0,-1).every((o,l)=>o===r[l])?n[n.length-1]-r[r.length-1]:0}function ci(n,r,i){i===void 0&&(i=!1);let{routesMeta:o}=n,l={},m="/",p=[];for(let S=0;S<o.length;++S){let v=o[S],I=S===o.length-1,E=m==="/"?r:r.slice(m.length)||"/",d=Or({path:v.relativePath,caseSensitive:v.caseSensitive,end:I},E),b=v.route;if(!d&&I&&i&&!o[o.length-1].route.index&&(d=Or({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},E)),!d)return null;Object.assign(l,d.params),p.push({params:l,pathname:ze([m,d.pathname]),pathnameBase:yi(ze([m,d.pathnameBase])),route:b}),d.pathnameBase!=="/"&&(m=ze([m,d.pathnameBase]))}return p}function Or(n,r){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[i,o]=ui(n.path,n.caseSensitive,n.end),l=r.match(i);if(!l)return null;let m=l[0],p=m.replace(/(.)\/+$/,"$1"),S=l.slice(1);return{params:o.reduce((I,E,d)=>{let{paramName:b,isOptional:W}=E;if(b==="*"){let T=S[d]||"";p=m.slice(0,m.length-T.length).replace(/(.)\/+$/,"$1")}const Q=S[d];return W&&!Q?I[b]=void 0:I[b]=(Q||"").replace(/%2F/g,"/"),I},{}),pathname:m,pathnameBase:p,pattern:n}}function ui(n,r,i){r===void 0&&(r=!1),i===void 0&&(i=!0),vr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let o=[],l="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,S,v)=>(o.push({paramName:S,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(o.push({paramName:"*"}),l+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?l+="\\/*$":n!==""&&n!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,r?void 0:"i"),o]}function di(n){try{return n.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return vr(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),n}}function Vr(n,r){if(r==="/")return n;if(!n.toLowerCase().startsWith(r.toLowerCase()))return null;let i=r.endsWith("/")?r.length-1:r.length,o=n.charAt(i);return o&&o!=="/"?null:n.slice(i)||"/"}const fi=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hi=n=>fi.test(n);function mi(n,r){r===void 0&&(r="/");let{pathname:i,search:o="",hash:l=""}=typeof n=="string"?Ge(n):n,m;if(i)if(hi(i))m=i;else{if(i.includes("//")){let p=i;i=i.replace(/\/\/+/g,"/"),vr(!1,"Pathnames cannot have embedded double slashes - normalizing "+(p+" -> "+i))}i.startsWith("/")?m=Nr(i.substring(1),"/"):m=Nr(i,r)}else m=r;return{pathname:m,search:xi(o),hash:wi(l)}}function Nr(n,r){let i=r.replace(/\/+$/,"").split("/");return n.split("/").forEach(l=>{l===".."?i.length>1&&i.pop():l!=="."&&i.push(l)}),i.length>1?i.join("/"):"/"}function ar(n,r,i,o){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gi(n){return n.filter((r,i)=>i===0||r.route.path&&r.route.path.length>0)}function vi(n,r){let i=gi(n);return r?i.map((o,l)=>l===i.length-1?o.pathname:o.pathnameBase):i.map(o=>o.pathnameBase)}function pi(n,r,i,o){o===void 0&&(o=!1);let l;typeof n=="string"?l=Ge(n):(l=ct({},n),ve(!l.pathname||!l.pathname.includes("?"),ar("?","pathname","search",l)),ve(!l.pathname||!l.pathname.includes("#"),ar("#","pathname","hash",l)),ve(!l.search||!l.search.includes("#"),ar("#","search","hash",l)));let m=n===""||l.pathname==="",p=m?"/":l.pathname,S;if(p==null)S=i;else{let d=r.length-1;if(!o&&p.startsWith("..")){let b=p.split("/");for(;b[0]==="..";)b.shift(),d-=1;l.pathname=b.join("/")}S=d>=0?r[d]:"/"}let v=mi(l,S),I=p&&p!=="/"&&p.endsWith("/"),E=(m||p===".")&&i.endsWith("/");return!v.pathname.endsWith("/")&&(I||E)&&(v.pathname+="/"),v}const ze=n=>n.join("/").replace(/\/\/+/g,"/"),yi=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),xi=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,wi=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function bi(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Yr=["post","put","patch","delete"];new Set(Yr);const Si=["get",...Yr];new Set(Si);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ut(){return ut=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},ut.apply(this,arguments)}const pr=y.createContext(null),Ei=y.createContext(null),Bt=y.createContext(null),Ut=y.createContext(null),Je=y.createContext({outlet:null,matches:[],isDataRoute:!1}),Gr=y.createContext(null);function Ft(){return y.useContext(Ut)!=null}function Pt(){return Ft()||ve(!1),y.useContext(Ut).location}function Jr(n){y.useContext(Bt).static||y.useLayoutEffect(n)}function je(){let{isDataRoute:n}=y.useContext(Je);return n?Pi():Ii()}function Ii(){Ft()||ve(!1);let n=y.useContext(pr),{basename:r,future:i,navigator:o}=y.useContext(Bt),{matches:l}=y.useContext(Je),{pathname:m}=Pt(),p=JSON.stringify(vi(l,i.v7_relativeSplatPath)),S=y.useRef(!1);return Jr(()=>{S.current=!0}),y.useCallback(function(I,E){if(E===void 0&&(E={}),!S.current)return;if(typeof I=="number"){o.go(I);return}let d=pi(I,JSON.parse(p),m,E.relative==="path");n==null&&r!=="/"&&(d.pathname=d.pathname==="/"?r:ze([r,d.pathname])),(E.replace?o.replace:o.push)(d,E.state,E)},[r,o,p,m,n])}function Ci(n,r){return Ai(n,r)}function Ai(n,r,i,o){Ft()||ve(!1);let{navigator:l}=y.useContext(Bt),{matches:m}=y.useContext(Je),p=m[m.length-1],S=p?p.params:{};p&&p.pathname;let v=p?p.pathnameBase:"/";p&&p.route;let I=Pt(),E;if(r){var d;let D=typeof r=="string"?Ge(r):r;v==="/"||(d=D.pathname)!=null&&d.startsWith(v)||ve(!1),E=D}else E=I;let b=E.pathname||"/",W=b;if(v!=="/"){let D=v.replace(/^\//,"").split("/");W="/"+b.replace(/^\//,"").split("/").slice(D.length).join("/")}let Q=Zn(n,{pathname:W}),T=Ni(Q&&Q.map(D=>Object.assign({},D,{params:Object.assign({},S,D.params),pathname:ze([v,l.encodeLocation?l.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?v:ze([v,l.encodeLocation?l.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),m,i,o);return r&&T?y.createElement(Ut.Provider,{value:{location:ut({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:Fe.Pop}},T):T}function _i(){let n=Fi(),r=bi(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),i=n instanceof Error?n.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},m=null;return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},r),i?y.createElement("pre",{style:l},i):null,m)}const Ri=y.createElement(_i,null);class Ti extends y.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,i){return i.location!==r.location||i.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:i.error,location:i.location,revalidation:r.revalidation||i.revalidation}}componentDidCatch(r,i){console.error("React Router caught the following error during render",r,i)}render(){return this.state.error!==void 0?y.createElement(Je.Provider,{value:this.props.routeContext},y.createElement(Gr.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Oi(n){let{routeContext:r,match:i,children:o}=n,l=y.useContext(pr);return l&&l.static&&l.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=i.route.id),y.createElement(Je.Provider,{value:r},o)}function Ni(n,r,i,o){var l;if(r===void 0&&(r=[]),i===void 0&&(i=null),o===void 0&&(o=null),n==null){var m;if(!i)return null;if(i.errors)n=i.matches;else if((m=o)!=null&&m.v7_partialHydration&&r.length===0&&!i.initialized&&i.matches.length>0)n=i.matches;else return null}let p=n,S=(l=i)==null?void 0:l.errors;if(S!=null){let E=p.findIndex(d=>d.route.id&&(S==null?void 0:S[d.route.id])!==void 0);E>=0||ve(!1),p=p.slice(0,Math.min(p.length,E+1))}let v=!1,I=-1;if(i&&o&&o.v7_partialHydration)for(let E=0;E<p.length;E++){let d=p[E];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(I=E),d.route.id){let{loaderData:b,errors:W}=i,Q=d.route.loader&&b[d.route.id]===void 0&&(!W||W[d.route.id]===void 0);if(d.route.lazy||Q){v=!0,I>=0?p=p.slice(0,I+1):p=[p[0]];break}}}return p.reduceRight((E,d,b)=>{let W,Q=!1,T=null,D=null;i&&(W=S&&d.route.id?S[d.route.id]:void 0,T=d.route.errorElement||Ri,v&&(I<0&&b===0?(Li("route-fallback",!1),Q=!0,D=null):I===b&&(Q=!0,D=d.route.hydrateFallbackElement||null)));let F=r.concat(p.slice(0,b+1)),z=()=>{let q;return W?q=T:Q?q=D:d.route.Component?q=y.createElement(d.route.Component,null):d.route.element?q=d.route.element:q=E,y.createElement(Oi,{match:d,routeContext:{outlet:E,matches:F,isDataRoute:i!=null},children:q})};return i&&(d.route.ErrorBoundary||d.route.errorElement||b===0)?y.createElement(Ti,{location:i.location,revalidation:i.revalidation,component:T,error:W,children:z(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):z()},null)}var Hr=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(Hr||{}),Dt=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Dt||{});function Di(n){let r=y.useContext(pr);return r||ve(!1),r}function Bi(n){let r=y.useContext(Ei);return r||ve(!1),r}function Ui(n){let r=y.useContext(Je);return r||ve(!1),r}function Xr(n){let r=Ui(),i=r.matches[r.matches.length-1];return i.route.id||ve(!1),i.route.id}function Fi(){var n;let r=y.useContext(Gr),i=Bi(Dt.UseRouteError),o=Xr(Dt.UseRouteError);return r!==void 0?r:(n=i.errors)==null?void 0:n[o]}function Pi(){let{router:n}=Di(Hr.UseNavigateStable),r=Xr(Dt.UseNavigateStable),i=y.useRef(!1);return Jr(()=>{i.current=!0}),y.useCallback(function(l,m){m===void 0&&(m={}),i.current&&(typeof l=="number"?n.navigate(l):n.navigate(l,ut({fromRouteId:r},m)))},[n,r])}const Dr={};function Li(n,r,i){!r&&!Dr[n]&&(Dr[n]=!0)}function Wi(n,r){n==null||n.v7_startTransition,(n==null?void 0:n.v7_relativeSplatPath)===void 0&&(!r||r.v7_relativeSplatPath),r&&(r.v7_fetcherPersist,r.v7_normalizeFormMethod,r.v7_partialHydration,r.v7_skipActionErrorRevalidation)}function Ne(n){ve(!1)}function Qi(n){let{basename:r="/",children:i=null,location:o,navigationType:l=Fe.Pop,navigator:m,static:p=!1,future:S}=n;Ft()&&ve(!1);let v=r.replace(/^\/*/,"/"),I=y.useMemo(()=>({basename:v,navigator:m,static:p,future:ut({v7_relativeSplatPath:!1},S)}),[v,S,m,p]);typeof o=="string"&&(o=Ge(o));let{pathname:E="/",search:d="",hash:b="",state:W=null,key:Q="default"}=o,T=y.useMemo(()=>{let D=Vr(E,v);return D==null?null:{location:{pathname:D,search:d,hash:b,state:W,key:Q},navigationType:l}},[v,E,d,b,W,Q,l]);return T==null?null:y.createElement(Bt.Provider,{value:I},y.createElement(Ut.Provider,{children:i,value:T}))}function ki(n){let{children:r,location:i}=n;return Ci(lr(r),i)}new Promise(()=>{});function lr(n,r){r===void 0&&(r=[]);let i=[];return y.Children.forEach(n,(o,l)=>{if(!y.isValidElement(o))return;let m=[...r,l];if(o.type===y.Fragment){i.push.apply(i,lr(o.props.children,m));return}o.type!==Ne&&ve(!1),!o.props.index||!o.props.children||ve(!1);let p={id:o.props.id||m.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(p.children=lr(o.props.children,m)),i.push(p)}),i}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const zi="6";try{window.__reactRouterVersion=zi}catch{}const ji="startTransition",Br=Yn[ji];function $i(n){let{basename:r,children:i,future:o,window:l}=n,m=y.useRef();m.current==null&&(m.current=Jn({window:l,v5Compat:!0}));let p=m.current,[S,v]=y.useState({action:p.action,location:p.location}),{v7_startTransition:I}=o||{},E=y.useCallback(d=>{I&&Br?Br(()=>v(d)):v(d)},[v,I]);return y.useLayoutEffect(()=>p.listen(E),[p,E]),y.useEffect(()=>Wi(o),[o]),y.createElement(Qi,{basename:r,children:i,location:S.location,navigationType:S.action,navigator:p,future:o})}var Ur;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Ur||(Ur={}));var Fr;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Fr||(Fr={}));const Mi="/app.config.json";class Ki{constructor(){At(this,"config",null);At(this,"currentUserKey","qb_current_user")}async loadConfig(){this.config||await this.reloadConfig()}async reloadConfig(){try{const r=await fetch(Mi,{cache:"no-store"});this.config=await r.json()}catch(r){console.error("Âä†ËΩΩÈÖçÁΩÆÊñá‰ª∂Â§±Ë¥•:",r),this.config={users:[]}}}async login(r,i){var l;await this.reloadConfig();const o=(l=this.config)==null?void 0:l.users.find(m=>m.username===r&&m.password===i);if(o){localStorage.setItem(this.currentUserKey,JSON.stringify({username:o.username,displayName:o.displayName||o.username}));try{window.dispatchEvent(new CustomEvent("authChanged",{detail:{authenticated:!0,username:o.username}}))}catch{}return!0}return!1}logout(){localStorage.removeItem(this.currentUserKey);try{window.dispatchEvent(new CustomEvent("authChanged",{detail:{authenticated:!1}}))}catch{}}getCurrentUser(){const r=localStorage.getItem(this.currentUserKey);return r?JSON.parse(r):null}async isAuthenticated(){return await this.loadConfig(),this.getCurrentUser()!==null}}const De=new Ki,Vi=()=>{const[n,r]=Nt.useState(null),i=je(),o=Pt(),l=Cn(),m=An(l.breakpoints.down("md")),[p,S]=y.useState(!1),[v,I]=y.useState(!1),E=T=>{r(T.currentTarget)},d=()=>{r(null)},b=T=>{i(T),d()};y.useEffect(()=>{const T=De.getCurrentUser();S(!!T),I(!!T&&T.username==="admin");const D=()=>{const F=De.getCurrentUser();S(!!F),I(!!F&&F.username==="admin")};return window.addEventListener("authChanged",D),()=>window.removeEventListener("authChanged",D)},[]);const W=[{path:"/",label:"È¶ñÈ°µ",icon:e(Nn,{})},{path:"/generator",label:"È¢òÂ∫ìÁÆ°ÁêÜ",icon:e(Pr,{})},{path:"/practice",label:"ÂºÄÂßãÁªÉ‰π†",icon:e(cr,{})},{path:"/wrong-questions",label:"ÈîôÈ¢òÊú¨",icon:e(ft,{})},{path:"/favorites",label:"Êî∂ËóèÂ§π",icon:e(lt,{})},{path:"/stats",label:"Â≠¶‰π†ÁªüËÆ°",icon:e(Lr,{})},{path:"/profile",label:"‰∏™‰∫∫‰∏≠ÂøÉ",icon:e(Zt,{})}],Q=T=>o.pathname===T;return e(_n,{position:"static",elevation:1,children:g(Rn,{children:[e(w,{variant:"h6",component:"div",sx:{flexGrow:1,fontWeight:"bold",cursor:"pointer"},onClick:()=>i("/"),children:"üè• Êä§ÁêÜÂ≠¶È¢òÂ∫ì"}),m?g(st,{children:[e(dt,{size:"large",edge:"start",color:"inherit","aria-label":"menu",onClick:E,children:e(Tn,{})}),e(On,{id:"menu-appbar",anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!n,onClose:d,children:(p?W:[{path:"/login",label:"ÁôªÂΩï",icon:e(Zt,{})}]).map(T=>e(Tt,{onClick:()=>b(T.path),selected:Q(T.path),children:g(P,{sx:{display:"flex",alignItems:"center",gap:1},children:[T.icon,T.label]})},T.path))})]}):e(P,{sx:{display:"flex",gap:1},children:(p?W:[{path:"/login",label:"ÁôªÂΩï",icon:e(Zt,{})}]).map(T=>e(ae,{color:"inherit",startIcon:T.icon,onClick:()=>i(T.path),variant:Q(T.path)?"outlined":"text",sx:{"&.MuiButton-outlined":{backgroundColor:"rgba(255, 255, 255, 0.1)",borderColor:"rgba(255, 255, 255, 0.3)"}},children:T.label},T.path))})]})})},Yi=()=>e(P,{component:"footer",sx:{py:3,px:2,mt:"auto",backgroundColor:n=>n.palette.mode==="light"?n.palette.grey[200]:n.palette.grey[800]},children:e(ye,{maxWidth:"sm",children:g(w,{variant:"body2",color:"text.secondary",align:"center",children:["¬© ",new Date().getFullYear()," Êä§ÁêÜÂ≠¶È¢òÂ∫ì - ‰∏™ÊÄßÂåñÂ≠¶‰π†Âπ≥Âè∞"]})})});function Rt(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Zr={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(n,r){(function(i){n.exports=i()})(function(){return function i(o,l,m){function p(I,E){if(!l[I]){if(!o[I]){var d=typeof Rt=="function"&&Rt;if(!E&&d)return d(I,!0);if(S)return S(I,!0);var b=new Error("Cannot find module '"+I+"'");throw b.code="MODULE_NOT_FOUND",b}var W=l[I]={exports:{}};o[I][0].call(W.exports,function(Q){var T=o[I][1][Q];return p(T||Q)},W,W.exports,i,o,l,m)}return l[I].exports}for(var S=typeof Rt=="function"&&Rt,v=0;v<m.length;v++)p(m[v]);return p}({1:[function(i,o,l){(function(m){var p=m.MutationObserver||m.WebKitMutationObserver,S;if(p){var v=0,I=new p(Q),E=m.document.createTextNode("");I.observe(E,{characterData:!0}),S=function(){E.data=v=++v%2}}else if(!m.setImmediate&&typeof m.MessageChannel<"u"){var d=new m.MessageChannel;d.port1.onmessage=Q,S=function(){d.port2.postMessage(0)}}else"document"in m&&"onreadystatechange"in m.document.createElement("script")?S=function(){var D=m.document.createElement("script");D.onreadystatechange=function(){Q(),D.onreadystatechange=null,D.parentNode.removeChild(D),D=null},m.document.documentElement.appendChild(D)}:S=function(){setTimeout(Q,0)};var b,W=[];function Q(){b=!0;for(var D,F,z=W.length;z;){for(F=W,W=[],D=-1;++D<z;)F[D]();z=W.length}b=!1}o.exports=T;function T(D){W.push(D)===1&&!b&&S()}}).call(this,typeof _t<"u"?_t:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(i,o,l){var m=i(1);function p(){}var S={},v=["REJECTED"],I=["FULFILLED"],E=["PENDING"];o.exports=d;function d(B){if(typeof B!="function")throw new TypeError("resolver must be a function");this.state=E,this.queue=[],this.outcome=void 0,B!==p&&T(this,B)}d.prototype.catch=function(B){return this.then(null,B)},d.prototype.then=function(B,$){if(typeof B!="function"&&this.state===I||typeof $!="function"&&this.state===v)return this;var j=new this.constructor(p);if(this.state!==E){var Y=this.state===I?B:$;W(j,Y,this.outcome)}else this.queue.push(new b(j,B,$));return j};function b(B,$,j){this.promise=B,typeof $=="function"&&(this.onFulfilled=$,this.callFulfilled=this.otherCallFulfilled),typeof j=="function"&&(this.onRejected=j,this.callRejected=this.otherCallRejected)}b.prototype.callFulfilled=function(B){S.resolve(this.promise,B)},b.prototype.otherCallFulfilled=function(B){W(this.promise,this.onFulfilled,B)},b.prototype.callRejected=function(B){S.reject(this.promise,B)},b.prototype.otherCallRejected=function(B){W(this.promise,this.onRejected,B)};function W(B,$,j){m(function(){var Y;try{Y=$(j)}catch(U){return S.reject(B,U)}Y===B?S.reject(B,new TypeError("Cannot resolve promise with itself")):S.resolve(B,Y)})}S.resolve=function(B,$){var j=D(Q,$);if(j.status==="error")return S.reject(B,j.value);var Y=j.value;if(Y)T(B,Y);else{B.state=I,B.outcome=$;for(var U=-1,G=B.queue.length;++U<G;)B.queue[U].callFulfilled($)}return B},S.reject=function(B,$){B.state=v,B.outcome=$;for(var j=-1,Y=B.queue.length;++j<Y;)B.queue[j].callRejected($);return B};function Q(B){var $=B&&B.then;if(B&&(typeof B=="object"||typeof B=="function")&&typeof $=="function")return function(){$.apply(B,arguments)}}function T(B,$){var j=!1;function Y(re){j||(j=!0,S.reject(B,re))}function U(re){j||(j=!0,S.resolve(B,re))}function G(){$(U,Y)}var M=D(G);M.status==="error"&&Y(M.value)}function D(B,$){var j={};try{j.value=B($),j.status="success"}catch(Y){j.status="error",j.value=Y}return j}d.resolve=F;function F(B){return B instanceof this?B:S.resolve(new this(p),B)}d.reject=z;function z(B){var $=new this(p);return S.reject($,B)}d.all=q;function q(B){var $=this;if(Object.prototype.toString.call(B)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=B.length,Y=!1;if(!j)return this.resolve([]);for(var U=new Array(j),G=0,M=-1,re=new this(p);++M<j;)de(B[M],M);return re;function de(pe,_e){$.resolve(pe).then(Oe,function(oe){Y||(Y=!0,S.reject(re,oe))});function Oe(oe){U[_e]=oe,++G===j&&!Y&&(Y=!0,S.resolve(re,U))}}}d.race=he;function he(B){var $=this;if(Object.prototype.toString.call(B)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=B.length,Y=!1;if(!j)return this.resolve([]);for(var U=-1,G=new this(p);++U<j;)M(B[U]);return G;function M(re){$.resolve(re).then(function(de){Y||(Y=!0,S.resolve(G,de))},function(de){Y||(Y=!0,S.reject(G,de))})}}},{1:1}],3:[function(i,o,l){(function(m){typeof m.Promise!="function"&&(m.Promise=i(2))}).call(this,typeof _t<"u"?_t:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(i,o,l){var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function p(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function S(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var v=S();function I(){try{if(!v||!v.open)return!1;var t=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),s=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!t||s)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function E(t,s){t=t||[],s=s||{};try{return new Blob(t,s)}catch(c){if(c.name!=="TypeError")throw c;for(var a=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,u=new a,f=0;f<t.length;f+=1)u.append(t[f]);return u.getBlob(s.type)}}typeof Promise>"u"&&i(3);var d=Promise;function b(t,s){s&&t.then(function(a){s(null,a)},function(a){s(a)})}function W(t,s,a){typeof s=="function"&&t.then(s),typeof a=="function"&&t.catch(a)}function Q(t){return typeof t!="string"&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function T(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var D="local-forage-detect-blob-support",F=void 0,z={},q=Object.prototype.toString,he="readonly",B="readwrite";function $(t){for(var s=t.length,a=new ArrayBuffer(s),u=new Uint8Array(a),f=0;f<s;f++)u[f]=t.charCodeAt(f);return a}function j(t){return new d(function(s){var a=t.transaction(D,B),u=E([""]);a.objectStore(D).put(u,"key"),a.onabort=function(f){f.preventDefault(),f.stopPropagation(),s(!1)},a.oncomplete=function(){var f=navigator.userAgent.match(/Chrome\/(\d+)/),c=navigator.userAgent.match(/Edge\//);s(c||!f||parseInt(f[1],10)>=43)}}).catch(function(){return!1})}function Y(t){return typeof F=="boolean"?d.resolve(F):j(t).then(function(s){return F=s,F})}function U(t){var s=z[t.name],a={};a.promise=new d(function(u,f){a.resolve=u,a.reject=f}),s.deferredOperations.push(a),s.dbReady?s.dbReady=s.dbReady.then(function(){return a.promise}):s.dbReady=a.promise}function G(t){var s=z[t.name],a=s.deferredOperations.pop();if(a)return a.resolve(),a.promise}function M(t,s){var a=z[t.name],u=a.deferredOperations.pop();if(u)return u.reject(s),u.promise}function re(t,s){return new d(function(a,u){if(z[t.name]=z[t.name]||Ue(),t.db)if(s)U(t),t.db.close();else return a(t.db);var f=[t.name];s&&f.push(t.version);var c=v.open.apply(v,f);s&&(c.onupgradeneeded=function(x){var C=c.result;try{C.createObjectStore(t.storeName),x.oldVersion<=1&&C.createObjectStore(D)}catch(_){if(_.name==="ConstraintError")console.warn('The database "'+t.name+'" has been upgraded from version '+x.oldVersion+" to version "+x.newVersion+', but the storage "'+t.storeName+'" already exists.');else throw _}}),c.onerror=function(x){x.preventDefault(),u(c.error)},c.onsuccess=function(){var x=c.result;x.onversionchange=function(C){C.target.close()},a(x),G(t)}})}function de(t){return re(t,!1)}function pe(t){return re(t,!0)}function _e(t,s){if(!t.db)return!0;var a=!t.db.objectStoreNames.contains(t.storeName),u=t.version<t.db.version,f=t.version>t.db.version;if(u&&(t.version!==s&&console.warn('The database "'+t.name+`" can't be downgraded from version `+t.db.version+" to version "+t.version+"."),t.version=t.db.version),f||a){if(a){var c=t.db.version+1;c>t.version&&(t.version=c)}return!0}return!1}function Oe(t){return new d(function(s,a){var u=new FileReader;u.onerror=a,u.onloadend=function(f){var c=btoa(f.target.result||"");s({__local_forage_encoded_blob:!0,data:c,type:t.type})},u.readAsBinaryString(t)})}function oe(t){var s=$(atob(t.data));return E([s],{type:t.type})}function Pe(t){return t&&t.__local_forage_encoded_blob}function Le(t){var s=this,a=s._initReady().then(function(){var u=z[s._dbInfo.name];if(u&&u.dbReady)return u.dbReady});return W(a,t,t),a}function xe(t){U(t);for(var s=z[t.name],a=s.forages,u=0;u<a.length;u++){var f=a[u];f._dbInfo.db&&(f._dbInfo.db.close(),f._dbInfo.db=null)}return t.db=null,de(t).then(function(c){return t.db=c,_e(t)?pe(t):c}).then(function(c){t.db=s.db=c;for(var x=0;x<a.length;x++)a[x]._dbInfo.db=c}).catch(function(c){throw M(t,c),c})}function ee(t,s,a,u){u===void 0&&(u=1);try{var f=t.db.transaction(t.storeName,s);a(null,f)}catch(c){if(u>0&&(!t.db||c.name==="InvalidStateError"||c.name==="NotFoundError"))return d.resolve().then(function(){if(!t.db||c.name==="NotFoundError"&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),pe(t)}).then(function(){return xe(t).then(function(){ee(t,s,a,u-1)})}).catch(a);a(c)}}function Ue(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ne(t){var s=this,a={db:null};if(t)for(var u in t)a[u]=t[u];var f=z[a.name];f||(f=Ue(),z[a.name]=f),f.forages.push(s),s._initReady||(s._initReady=s.ready,s.ready=Le);var c=[];function x(){return d.resolve()}for(var C=0;C<f.forages.length;C++){var _=f.forages[C];_!==s&&c.push(_._initReady().catch(x))}var R=f.forages.slice(0);return d.all(c).then(function(){return a.db=f.db,de(a)}).then(function(N){return a.db=N,_e(a,s._defaultConfig.version)?pe(a):N}).then(function(N){a.db=f.db=N,s._dbInfo=a;for(var L=0;L<R.length;L++){var V=R[L];V!==s&&(V._dbInfo.db=a.db,V._dbInfo.version=a.version)}})}function we(t,s){var a=this;t=Q(t);var u=new d(function(f,c){a.ready().then(function(){ee(a._dbInfo,he,function(x,C){if(x)return c(x);try{var _=C.objectStore(a._dbInfo.storeName),R=_.get(t);R.onsuccess=function(){var N=R.result;N===void 0&&(N=null),Pe(N)&&(N=oe(N)),f(N)},R.onerror=function(){c(R.error)}}catch(N){c(N)}})}).catch(c)});return b(u,s),u}function Ee(t,s){var a=this,u=new d(function(f,c){a.ready().then(function(){ee(a._dbInfo,he,function(x,C){if(x)return c(x);try{var _=C.objectStore(a._dbInfo.storeName),R=_.openCursor(),N=1;R.onsuccess=function(){var L=R.result;if(L){var V=L.value;Pe(V)&&(V=oe(V));var H=t(V,L.key,N++);H!==void 0?f(H):L.continue()}else f()},R.onerror=function(){c(R.error)}}catch(L){c(L)}})}).catch(c)});return b(u,s),u}function be(t,s,a){var u=this;t=Q(t);var f=new d(function(c,x){var C;u.ready().then(function(){return C=u._dbInfo,q.call(s)==="[object Blob]"?Y(C.db).then(function(_){return _?s:Oe(s)}):s}).then(function(_){ee(u._dbInfo,B,function(R,N){if(R)return x(R);try{var L=N.objectStore(u._dbInfo.storeName);_===null&&(_=void 0);var V=L.put(_,t);N.oncomplete=function(){_===void 0&&(_=null),c(_)},N.onabort=N.onerror=function(){var H=V.error?V.error:V.transaction.error;x(H)}}catch(H){x(H)}})}).catch(x)});return b(f,a),f}function Lt(t,s){var a=this;t=Q(t);var u=new d(function(f,c){a.ready().then(function(){ee(a._dbInfo,B,function(x,C){if(x)return c(x);try{var _=C.objectStore(a._dbInfo.storeName),R=_.delete(t);C.oncomplete=function(){f()},C.onerror=function(){c(R.error)},C.onabort=function(){var N=R.error?R.error:R.transaction.error;c(N)}}catch(N){c(N)}})}).catch(c)});return b(u,s),u}function He(t){var s=this,a=new d(function(u,f){s.ready().then(function(){ee(s._dbInfo,B,function(c,x){if(c)return f(c);try{var C=x.objectStore(s._dbInfo.storeName),_=C.clear();x.oncomplete=function(){u()},x.onabort=x.onerror=function(){var R=_.error?_.error:_.transaction.error;f(R)}}catch(R){f(R)}})}).catch(f)});return b(a,t),a}function Xe(t){var s=this,a=new d(function(u,f){s.ready().then(function(){ee(s._dbInfo,he,function(c,x){if(c)return f(c);try{var C=x.objectStore(s._dbInfo.storeName),_=C.count();_.onsuccess=function(){u(_.result)},_.onerror=function(){f(_.error)}}catch(R){f(R)}})}).catch(f)});return b(a,t),a}function Ze(t,s){var a=this,u=new d(function(f,c){if(t<0){f(null);return}a.ready().then(function(){ee(a._dbInfo,he,function(x,C){if(x)return c(x);try{var _=C.objectStore(a._dbInfo.storeName),R=!1,N=_.openKeyCursor();N.onsuccess=function(){var L=N.result;if(!L){f(null);return}t===0||R?f(L.key):(R=!0,L.advance(t))},N.onerror=function(){c(N.error)}}catch(L){c(L)}})}).catch(c)});return b(u,s),u}function Wt(t){var s=this,a=new d(function(u,f){s.ready().then(function(){ee(s._dbInfo,he,function(c,x){if(c)return f(c);try{var C=x.objectStore(s._dbInfo.storeName),_=C.openKeyCursor(),R=[];_.onsuccess=function(){var N=_.result;if(!N){u(R);return}R.push(N.key),N.continue()},_.onerror=function(){f(_.error)}}catch(N){f(N)}})}).catch(f)});return b(a,t),a}function Qt(t,s){s=T.apply(this,arguments);var a=this.config();t=typeof t!="function"&&t||{},t.name||(t.name=t.name||a.name,t.storeName=t.storeName||a.storeName);var u=this,f;if(!t.name)f=d.reject("Invalid arguments");else{var c=t.name===a.name&&u._dbInfo.db,x=c?d.resolve(u._dbInfo.db):de(t).then(function(C){var _=z[t.name],R=_.forages;_.db=C;for(var N=0;N<R.length;N++)R[N]._dbInfo.db=C;return C});t.storeName?f=x.then(function(C){if(C.objectStoreNames.contains(t.storeName)){var _=C.version+1;U(t);var R=z[t.name],N=R.forages;C.close();for(var L=0;L<N.length;L++){var V=N[L];V._dbInfo.db=null,V._dbInfo.version=_}var H=new d(function(X,me){var fe=v.open(t.name,_);fe.onerror=function(Ae){var at=fe.result;at.close(),me(Ae)},fe.onupgradeneeded=function(){var Ae=fe.result;Ae.deleteObjectStore(t.storeName)},fe.onsuccess=function(){var Ae=fe.result;Ae.close(),X(Ae)}});return H.then(function(X){R.db=X;for(var me=0;me<N.length;me++){var fe=N[me];fe._dbInfo.db=X,G(fe._dbInfo)}}).catch(function(X){throw(M(t,X)||d.resolve()).catch(function(){}),X})}}):f=x.then(function(C){U(t);var _=z[t.name],R=_.forages;C.close();for(var N=0;N<R.length;N++){var L=R[N];L._dbInfo.db=null}var V=new d(function(H,X){var me=v.deleteDatabase(t.name);me.onerror=function(){var fe=me.result;fe&&fe.close(),X(me.error)},me.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},me.onsuccess=function(){var fe=me.result;fe&&fe.close(),H(fe)}});return V.then(function(H){_.db=H;for(var X=0;X<R.length;X++){var me=R[X];G(me._dbInfo)}}).catch(function(H){throw(M(t,H)||d.resolve()).catch(function(){}),H})})}return b(f,s),f}var kt={_driver:"asyncStorage",_initStorage:ne,_support:I(),iterate:Ee,getItem:we,setItem:be,removeItem:Lt,clear:He,length:Xe,key:Ze,keys:Wt,dropInstance:Qt};function zt(){return typeof openDatabase=="function"}var Ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ht="~~local_forage_type~",$e=/^~~local_forage_type~([^~]+)~/,We="__lfsc__:",qe=We.length,et="arbf",tt="blob",mt="si08",gt="ui08",vt="uic8",pt="si16",yt="si32",rt="ur16",xt="ui32",wt="fl32",J="fl64",Ce=qe+et.length,bt=Object.prototype.toString;function St(t){var s=t.length*.75,a=t.length,u,f=0,c,x,C,_;t[t.length-1]==="="&&(s--,t[t.length-2]==="="&&s--);var R=new ArrayBuffer(s),N=new Uint8Array(R);for(u=0;u<a;u+=4)c=Ie.indexOf(t[u]),x=Ie.indexOf(t[u+1]),C=Ie.indexOf(t[u+2]),_=Ie.indexOf(t[u+3]),N[f++]=c<<2|x>>4,N[f++]=(x&15)<<4|C>>2,N[f++]=(C&3)<<6|_&63;return R}function nt(t){var s=new Uint8Array(t),a="",u;for(u=0;u<s.length;u+=3)a+=Ie[s[u]>>2],a+=Ie[(s[u]&3)<<4|s[u+1]>>4],a+=Ie[(s[u+1]&15)<<2|s[u+2]>>6],a+=Ie[s[u+2]&63];return s.length%3===2?a=a.substring(0,a.length-1)+"=":s.length%3===1&&(a=a.substring(0,a.length-2)+"=="),a}function Et(t,s){var a="";if(t&&(a=bt.call(t)),t&&(a==="[object ArrayBuffer]"||t.buffer&&bt.call(t.buffer)==="[object ArrayBuffer]")){var u,f=We;t instanceof ArrayBuffer?(u=t,f+=et):(u=t.buffer,a==="[object Int8Array]"?f+=mt:a==="[object Uint8Array]"?f+=gt:a==="[object Uint8ClampedArray]"?f+=vt:a==="[object Int16Array]"?f+=pt:a==="[object Uint16Array]"?f+=rt:a==="[object Int32Array]"?f+=yt:a==="[object Uint32Array]"?f+=xt:a==="[object Float32Array]"?f+=wt:a==="[object Float64Array]"?f+=J:s(new Error("Failed to get type for BinaryArray"))),s(f+nt(u))}else if(a==="[object Blob]"){var c=new FileReader;c.onload=function(){var x=ht+t.type+"~"+nt(this.result);s(We+tt+x)},c.readAsArrayBuffer(t)}else try{s(JSON.stringify(t))}catch(x){console.error("Couldn't convert value into a JSON string: ",t),s(null,x)}}function It(t){if(t.substring(0,qe)!==We)return JSON.parse(t);var s=t.substring(Ce),a=t.substring(qe,Ce),u;if(a===tt&&$e.test(s)){var f=s.match($e);u=f[1],s=s.substring(f[0].length)}var c=St(s);switch(a){case et:return c;case tt:return E([c],{type:u});case mt:return new Int8Array(c);case gt:return new Uint8Array(c);case vt:return new Uint8ClampedArray(c);case pt:return new Int16Array(c);case rt:return new Uint16Array(c);case yt:return new Int32Array(c);case xt:return new Uint32Array(c);case wt:return new Float32Array(c);case J:return new Float64Array(c);default:throw new Error("Unkown type: "+a)}}var Me={serialize:Et,deserialize:It,stringToBuffer:St,bufferToString:nt};function h(t,s,a,u){t.executeSql("CREATE TABLE IF NOT EXISTS "+s.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],a,u)}function A(t){var s=this,a={db:null};if(t)for(var u in t)a[u]=typeof t[u]!="string"?t[u].toString():t[u];var f=new d(function(c,x){try{a.db=openDatabase(a.name,String(a.version),a.description,a.size)}catch(C){return x(C)}a.db.transaction(function(C){h(C,a,function(){s._dbInfo=a,c()},function(_,R){x(R)})},x)});return a.serializer=Me,f}function O(t,s,a,u,f,c){t.executeSql(a,u,f,function(x,C){C.code===C.SYNTAX_ERR?x.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[s.storeName],function(_,R){R.rows.length?c(_,C):h(_,s,function(){_.executeSql(a,u,f,c)},c)},c):c(x,C)},c)}function k(t,s){var a=this;t=Q(t);var u=new d(function(f,c){a.ready().then(function(){var x=a._dbInfo;x.db.transaction(function(C){O(C,x,"SELECT * FROM "+x.storeName+" WHERE key = ? LIMIT 1",[t],function(_,R){var N=R.rows.length?R.rows.item(0).value:null;N&&(N=x.serializer.deserialize(N)),f(N)},function(_,R){c(R)})})}).catch(c)});return b(u,s),u}function K(t,s){var a=this,u=new d(function(f,c){a.ready().then(function(){var x=a._dbInfo;x.db.transaction(function(C){O(C,x,"SELECT * FROM "+x.storeName,[],function(_,R){for(var N=R.rows,L=N.length,V=0;V<L;V++){var H=N.item(V),X=H.value;if(X&&(X=x.serializer.deserialize(X)),X=t(X,H.key,V+1),X!==void 0){f(X);return}}f()},function(_,R){c(R)})})}).catch(c)});return b(u,s),u}function ge(t,s,a,u){var f=this;t=Q(t);var c=new d(function(x,C){f.ready().then(function(){s===void 0&&(s=null);var _=s,R=f._dbInfo;R.serializer.serialize(s,function(N,L){L?C(L):R.db.transaction(function(V){O(V,R,"INSERT OR REPLACE INTO "+R.storeName+" (key, value) VALUES (?, ?)",[t,N],function(){x(_)},function(H,X){C(X)})},function(V){if(V.code===V.QUOTA_ERR){if(u>0){x(ge.apply(f,[t,_,a,u-1]));return}C(V)}})})}).catch(C)});return b(c,a),c}function Re(t,s,a){return ge.apply(this,[t,s,a,1])}function Ke(t,s){var a=this;t=Q(t);var u=new d(function(f,c){a.ready().then(function(){var x=a._dbInfo;x.db.transaction(function(C){O(C,x,"DELETE FROM "+x.storeName+" WHERE key = ?",[t],function(){f()},function(_,R){c(R)})})}).catch(c)});return b(u,s),u}function jt(t){var s=this,a=new d(function(u,f){s.ready().then(function(){var c=s._dbInfo;c.db.transaction(function(x){O(x,c,"DELETE FROM "+c.storeName,[],function(){u()},function(C,_){f(_)})})}).catch(f)});return b(a,t),a}function $t(t){var s=this,a=new d(function(u,f){s.ready().then(function(){var c=s._dbInfo;c.db.transaction(function(x){O(x,c,"SELECT COUNT(key) as c FROM "+c.storeName,[],function(C,_){var R=_.rows.item(0).c;u(R)},function(C,_){f(_)})})}).catch(f)});return b(a,t),a}function Mt(t,s){var a=this,u=new d(function(f,c){a.ready().then(function(){var x=a._dbInfo;x.db.transaction(function(C){O(C,x,"SELECT key FROM "+x.storeName+" WHERE id = ? LIMIT 1",[t+1],function(_,R){var N=R.rows.length?R.rows.item(0).key:null;f(N)},function(_,R){c(R)})})}).catch(c)});return b(u,s),u}function Kt(t){var s=this,a=new d(function(u,f){s.ready().then(function(){var c=s._dbInfo;c.db.transaction(function(x){O(x,c,"SELECT key FROM "+c.storeName,[],function(C,_){for(var R=[],N=0;N<_.rows.length;N++)R.push(_.rows.item(N).key);u(R)},function(C,_){f(_)})})}).catch(f)});return b(a,t),a}function Vt(t){return new d(function(s,a){t.transaction(function(u){u.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(f,c){for(var x=[],C=0;C<c.rows.length;C++)x.push(c.rows.item(C).name);s({db:t,storeNames:x})},function(f,c){a(c)})},function(u){a(u)})})}function Yt(t,s){s=T.apply(this,arguments);var a=this.config();t=typeof t!="function"&&t||{},t.name||(t.name=t.name||a.name,t.storeName=t.storeName||a.storeName);var u=this,f;return t.name?f=new d(function(c){var x;t.name===a.name?x=u._dbInfo.db:x=openDatabase(t.name,"","",0),t.storeName?c({db:x,storeNames:[t.storeName]}):c(Vt(x))}).then(function(c){return new d(function(x,C){c.db.transaction(function(_){function R(H){return new d(function(X,me){_.executeSql("DROP TABLE IF EXISTS "+H,[],function(){X()},function(fe,Ae){me(Ae)})})}for(var N=[],L=0,V=c.storeNames.length;L<V;L++)N.push(R(c.storeNames[L]));d.all(N).then(function(){x()}).catch(function(H){C(H)})},function(_){C(_)})})}):f=d.reject("Invalid arguments"),b(f,s),f}var ue={_driver:"webSQLStorage",_initStorage:A,_support:zt(),iterate:K,getItem:k,setItem:Re,removeItem:Ke,clear:jt,length:$t,key:Mt,keys:Kt,dropInstance:Yt};function Qe(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function yr(t,s){var a=t.name+"/";return t.storeName!==s.storeName&&(a+=t.storeName+"/"),a}function qr(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch{return!0}}function en(){return!qr()||localStorage.length>0}function tn(t){var s=this,a={};if(t)for(var u in t)a[u]=t[u];return a.keyPrefix=yr(t,s._defaultConfig),en()?(s._dbInfo=a,a.serializer=Me,d.resolve()):d.reject()}function rn(t){var s=this,a=s.ready().then(function(){for(var u=s._dbInfo.keyPrefix,f=localStorage.length-1;f>=0;f--){var c=localStorage.key(f);c.indexOf(u)===0&&localStorage.removeItem(c)}});return b(a,t),a}function nn(t,s){var a=this;t=Q(t);var u=a.ready().then(function(){var f=a._dbInfo,c=localStorage.getItem(f.keyPrefix+t);return c&&(c=f.serializer.deserialize(c)),c});return b(u,s),u}function an(t,s){var a=this,u=a.ready().then(function(){for(var f=a._dbInfo,c=f.keyPrefix,x=c.length,C=localStorage.length,_=1,R=0;R<C;R++){var N=localStorage.key(R);if(N.indexOf(c)===0){var L=localStorage.getItem(N);if(L&&(L=f.serializer.deserialize(L)),L=t(L,N.substring(x),_++),L!==void 0)return L}}});return b(u,s),u}function on(t,s){var a=this,u=a.ready().then(function(){var f=a._dbInfo,c;try{c=localStorage.key(t)}catch{c=null}return c&&(c=c.substring(f.keyPrefix.length)),c});return b(u,s),u}function sn(t){var s=this,a=s.ready().then(function(){for(var u=s._dbInfo,f=localStorage.length,c=[],x=0;x<f;x++){var C=localStorage.key(x);C.indexOf(u.keyPrefix)===0&&c.push(C.substring(u.keyPrefix.length))}return c});return b(a,t),a}function ln(t){var s=this,a=s.keys().then(function(u){return u.length});return b(a,t),a}function cn(t,s){var a=this;t=Q(t);var u=a.ready().then(function(){var f=a._dbInfo;localStorage.removeItem(f.keyPrefix+t)});return b(u,s),u}function un(t,s,a){var u=this;t=Q(t);var f=u.ready().then(function(){s===void 0&&(s=null);var c=s;return new d(function(x,C){var _=u._dbInfo;_.serializer.serialize(s,function(R,N){if(N)C(N);else try{localStorage.setItem(_.keyPrefix+t,R),x(c)}catch(L){(L.name==="QuotaExceededError"||L.name==="NS_ERROR_DOM_QUOTA_REACHED")&&C(L),C(L)}})})});return b(f,a),f}function dn(t,s){if(s=T.apply(this,arguments),t=typeof t!="function"&&t||{},!t.name){var a=this.config();t.name=t.name||a.name,t.storeName=t.storeName||a.storeName}var u=this,f;return t.name?f=new d(function(c){t.storeName?c(yr(t,u._defaultConfig)):c(t.name+"/")}).then(function(c){for(var x=localStorage.length-1;x>=0;x--){var C=localStorage.key(x);C.indexOf(c)===0&&localStorage.removeItem(C)}}):f=d.reject("Invalid arguments"),b(f,s),f}var fn={_driver:"localStorageWrapper",_initStorage:tn,_support:Qe(),iterate:an,getItem:nn,setItem:un,removeItem:cn,clear:rn,length:ln,key:on,keys:sn,dropInstance:dn},hn=function(s,a){return s===a||typeof s=="number"&&typeof a=="number"&&isNaN(s)&&isNaN(a)},mn=function(s,a){for(var u=s.length,f=0;f<u;){if(hn(s[f],a))return!0;f++}return!1},xr=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"},it={},wr={},Ve={INDEXEDDB:kt,WEBSQL:ue,LOCALSTORAGE:fn},gn=[Ve.INDEXEDDB._driver,Ve.WEBSQL._driver,Ve.LOCALSTORAGE._driver],Ct=["dropInstance"],Gt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ct),vn={description:"",driver:gn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function pn(t,s){t[s]=function(){var a=arguments;return t.ready().then(function(){return t[s].apply(t,a)})}}function Jt(){for(var t=1;t<arguments.length;t++){var s=arguments[t];if(s)for(var a in s)s.hasOwnProperty(a)&&(xr(s[a])?arguments[0][a]=s[a].slice():arguments[0][a]=s[a])}return arguments[0]}var yn=function(){function t(s){p(this,t);for(var a in Ve)if(Ve.hasOwnProperty(a)){var u=Ve[a],f=u._driver;this[a]=f,it[f]||this.defineDriver(u)}this._defaultConfig=Jt({},vn),this._config=Jt({},this._defaultConfig,s),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return t.prototype.config=function(a){if((typeof a>"u"?"undefined":m(a))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var u in a){if(u==="storeName"&&(a[u]=a[u].replace(/\W/g,"_")),u==="version"&&typeof a[u]!="number")return new Error("Database version must be a number.");this._config[u]=a[u]}return"driver"in a&&a.driver?this.setDriver(this._config.driver):!0}else return typeof a=="string"?this._config[a]:this._config},t.prototype.defineDriver=function(a,u,f){var c=new d(function(x,C){try{var _=a._driver,R=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!a._driver){C(R);return}for(var N=Gt.concat("_initStorage"),L=0,V=N.length;L<V;L++){var H=N[L],X=!mn(Ct,H);if((X||a[H])&&typeof a[H]!="function"){C(R);return}}var me=function(){for(var at=function(bn){return function(){var Sn=new Error("Method "+bn+" is not implemented by the current driver"),br=d.reject(Sn);return b(br,arguments[arguments.length-1]),br}},Ht=0,wn=Ct.length;Ht<wn;Ht++){var Xt=Ct[Ht];a[Xt]||(a[Xt]=at(Xt))}};me();var fe=function(at){it[_]&&console.info("Redefining LocalForage driver: "+_),it[_]=a,wr[_]=at,x()};"_support"in a?a._support&&typeof a._support=="function"?a._support().then(fe,C):fe(!!a._support):fe(!0)}catch(Ae){C(Ae)}});return W(c,u,f),c},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(a,u,f){var c=it[a]?d.resolve(it[a]):d.reject(new Error("Driver not found."));return W(c,u,f),c},t.prototype.getSerializer=function(a){var u=d.resolve(Me);return W(u,a),u},t.prototype.ready=function(a){var u=this,f=u._driverSet.then(function(){return u._ready===null&&(u._ready=u._initDriver()),u._ready});return W(f,a,a),f},t.prototype.setDriver=function(a,u,f){var c=this;xr(a)||(a=[a]);var x=this._getSupportedDrivers(a);function C(){c._config.driver=c.driver()}function _(L){return c._extend(L),C(),c._ready=c._initStorage(c._config),c._ready}function R(L){return function(){var V=0;function H(){for(;V<L.length;){var X=L[V];return V++,c._dbInfo=null,c._ready=null,c.getDriver(X).then(_).catch(H)}C();var me=new Error("No available storage method found.");return c._driverSet=d.reject(me),c._driverSet}return H()}}var N=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=N.then(function(){var L=x[0];return c._dbInfo=null,c._ready=null,c.getDriver(L).then(function(V){c._driver=V._driver,C(),c._wrapLibraryMethodsWithReady(),c._initDriver=R(x)})}).catch(function(){C();var L=new Error("No available storage method found.");return c._driverSet=d.reject(L),c._driverSet}),W(this._driverSet,u,f),this._driverSet},t.prototype.supports=function(a){return!!wr[a]},t.prototype._extend=function(a){Jt(this,a)},t.prototype._getSupportedDrivers=function(a){for(var u=[],f=0,c=a.length;f<c;f++){var x=a[f];this.supports(x)&&u.push(x)}return u},t.prototype._wrapLibraryMethodsWithReady=function(){for(var a=0,u=Gt.length;a<u;a++)pn(this,Gt[a])},t.prototype.createInstance=function(a){return new t(a)},t}(),xn=new yn;o.exports=xn},{3:3}]},{},[4])(4)})})(Zr);var Gi=Zr.exports;const Z=Gn(Gi);Z.config({name:"NursingQuestionBank",storeName:"question_bank"});const ie={QUESTIONS:"questions",ANSWER_RECORDS:"answer_records",STUDY_STATS:"study_stats",WRONG_QUESTIONS:"wrong_questions",FAVORITE_QUESTIONS:"favorite_questions",USER_SETTINGS:"user_settings",CURRENT_SESSION:"current_session"};class Ji{constructor(){At(this,"userFileLoaded",!1)}getUserKey(r){const i=De.getCurrentUser();return`${i?`${i.username}_`:""}${r}`}async tryLoadUserFile(){if(this.userFileLoaded)return;const r=De.getCurrentUser();if(!r){this.userFileLoaded=!0;return}try{const i=`/user-data/${r.username}.json`,o=await fetch(i,{cache:"no-store"});if(!o.ok){this.userFileLoaded=!0;return}const l=await o.json();await this.importData(JSON.stringify(l))}catch{}finally{this.userFileLoaded=!0}}async saveQuestions(r){await Z.setItem(ie.QUESTIONS,r)}async getQuestions(){const r=await Z.getItem(ie.QUESTIONS);return!r||r.length===0?(await this.tryLoadUserFile(),await Z.getItem(ie.QUESTIONS)||[]):r||[]}async addQuestion(r){const i=await this.getQuestions();i.push(r),await this.saveQuestions(i)}async updateQuestion(r,i){const o=await this.getQuestions(),l=o.findIndex(m=>m.id===r);l!==-1&&(o[l]={...o[l],...i},await this.saveQuestions(o))}async deleteQuestion(r){const o=(await this.getQuestions()).filter(l=>l.id!==r);await this.saveQuestions(o)}async saveAnswerRecord(r){const i=await this.getAnswerRecords();i.push(r),await Z.setItem(this.getUserKey(ie.ANSWER_RECORDS),i)}async getAnswerRecords(){const r=await Z.getItem(this.getUserKey(ie.ANSWER_RECORDS));return!r||r.length===0?(await this.tryLoadUserFile(),await Z.getItem(this.getUserKey(ie.ANSWER_RECORDS))||[]):r||[]}async getAnswerRecordsByQuestion(r){return(await this.getAnswerRecords()).filter(o=>o.questionId===r)}async saveStudyStats(r){await Z.setItem(this.getUserKey(ie.STUDY_STATS),r)}async getStudyStats(){const r=await Z.getItem(this.getUserKey(ie.STUDY_STATS));if(!r){await this.tryLoadUserFile();const i=await Z.getItem(this.getUserKey(ie.STUDY_STATS));return i||{totalQuestions:0,correctAnswers:0,wrongAnswers:0,totalTimeSpent:0,averageAccuracy:0,categoryStats:{}}}return r}async updateStudyStats(r,i,o){const l=await this.getStudyStats();l.totalQuestions+=1,i?l.correctAnswers+=1:l.wrongAnswers+=1,l.totalTimeSpent+=o,l.averageAccuracy=l.correctAnswers/l.totalQuestions,l.categoryStats[r.category]||(l.categoryStats[r.category]={total:0,correct:0,accuracy:0});const m=l.categoryStats[r.category];m.total+=1,i&&(m.correct+=1),m.accuracy=m.correct/m.total,await this.saveStudyStats(l)}async saveWrongQuestion(r){const i=await this.getWrongQuestions(),o=i.findIndex(l=>l.id===r.id);if(o!==-1)i[o].wrongCount+=1,i[o].lastWrongTime=new Date().toISOString();else{const l={...r,wrongCount:1,lastWrongTime:new Date().toISOString()};i.push(l)}await Z.setItem(this.getUserKey(ie.WRONG_QUESTIONS),i)}async getWrongQuestions(){const r=await Z.getItem(this.getUserKey(ie.WRONG_QUESTIONS));return!r||r.length===0?(await this.tryLoadUserFile(),await Z.getItem(this.getUserKey(ie.WRONG_QUESTIONS))||[]):r||[]}async removeWrongQuestion(r){const o=(await this.getWrongQuestions()).filter(l=>l.id!==r);await Z.setItem(this.getUserKey(ie.WRONG_QUESTIONS),o)}async saveFavoriteQuestion(r,i){const o=await this.getFavoriteQuestions();if(o.findIndex(m=>m.id===r.id)===-1){const m={...r,addedAt:new Date().toISOString(),notes:i};o.push(m),await Z.setItem(this.getUserKey(ie.FAVORITE_QUESTIONS),o)}}async getFavoriteQuestions(){const r=await Z.getItem(this.getUserKey(ie.FAVORITE_QUESTIONS));return!r||r.length===0?(await this.tryLoadUserFile(),await Z.getItem(this.getUserKey(ie.FAVORITE_QUESTIONS))||[]):r||[]}async removeFavoriteQuestion(r){const o=(await this.getFavoriteQuestions()).filter(l=>l.id!==r);await Z.setItem(this.getUserKey(ie.FAVORITE_QUESTIONS),o)}async saveUserSettings(r){await Z.setItem(this.getUserKey(ie.USER_SETTINGS),r)}async getUserSettings(){const r=await Z.getItem(this.getUserKey(ie.USER_SETTINGS));if(!r){await this.tryLoadUserFile();const i=await Z.getItem(this.getUserKey(ie.USER_SETTINGS));return i||{theme:"light",soundEnabled:!0,autoSave:!0,questionPerPage:10,showExplanation:!0}}return r}async saveCurrentSession(r){await Z.setItem(this.getUserKey(ie.CURRENT_SESSION),r)}async getCurrentSession(){const r=await Z.getItem(this.getUserKey(ie.CURRENT_SESSION));return r||(await this.tryLoadUserFile(),await Z.getItem(this.getUserKey(ie.CURRENT_SESSION))||null)}async clearCurrentSession(){await Z.removeItem(this.getUserKey(ie.CURRENT_SESSION))}async exportData(){const r=De.getCurrentUser(),i={questions:await this.getQuestions(),answerRecords:await this.getAnswerRecords(),studyStats:await this.getStudyStats(),wrongQuestions:await this.getWrongQuestions(),favoriteQuestions:await this.getFavoriteQuestions(),userSettings:await this.getUserSettings(),exportTime:new Date().toISOString(),user:(r==null?void 0:r.username)||"unknown"};return JSON.stringify(i,null,2)}async importData(r){try{const i=JSON.parse(r);i.questions&&await this.saveQuestions(i.questions),i.answerRecords&&await Z.setItem(this.getUserKey(ie.ANSWER_RECORDS),i.answerRecords),i.studyStats&&await this.saveStudyStats(i.studyStats),i.wrongQuestions&&await Z.setItem(this.getUserKey(ie.WRONG_QUESTIONS),i.wrongQuestions),i.favoriteQuestions&&await Z.setItem(this.getUserKey(ie.FAVORITE_QUESTIONS),i.favoriteQuestions),i.userSettings&&await this.saveUserSettings(i.userSettings)}catch{throw new Error("Êï∞ÊçÆÊ†ºÂºè‰∏çÊ≠£Á°ÆÔºåÊó†Ê≥ïÂØºÂÖ•")}}async clearAllData(){await Z.clear()}}const te=new Ji,Hi=()=>{const n=je(),[r,i]=y.useState(null),[o,l]=y.useState(0),[m,p]=y.useState(0),[S,v]=y.useState(0),[I,E]=y.useState(!0),[d,b]=y.useState(!1),[W,Q]=y.useState({categories:[],difficulties:[],types:[]}),[T,D]=y.useState({categories:[],difficulties:[],types:[]});y.useEffect(()=>{F(),z()},[]);const F=async()=>{try{const[U,G,M,re]=await Promise.all([te.getStudyStats(),fetch("/shared-questions.json").then(de=>de.json()),te.getWrongQuestions(),te.getFavoriteQuestions()]);i(U),l(G.length),p(M.length),v(re.length)}catch(U){console.error("Âä†ËΩΩÊï∞ÊçÆÂ§±Ë¥•:",U)}finally{E(!1)}},z=async()=>{try{const U=await fetch("/shared-questions.json");if(U.ok){const G=await U.json(),M=new Set,re=new Set,de=new Set;G.forEach(ne=>{M.add(ne.category),re.add(ne.difficulty),de.add(ne.type)});const pe=["easy","medium","hard"],_e=["single","multiple"],Oe=Array.from(re).filter(ne=>pe.includes(ne)).sort((ne,we)=>pe.indexOf(ne)-pe.indexOf(we)),oe=Array.from(re).filter(ne=>!pe.includes(ne)),Pe=Array.from(de).filter(ne=>_e.includes(ne)).sort((ne,we)=>_e.indexOf(ne)-_e.indexOf(we)),Le=Array.from(de).filter(ne=>!_e.includes(ne)),xe=["Êä§ÁêÜ‰∏ì‰∏öÈ¢ò","Ê≥ïÂæãÊ≥ïËßÑ","ÂÖ¨ÂÖ±Âü∫Á°Ä"],ee=Array.from(M).filter(ne=>xe.includes(ne)).sort((ne,we)=>xe.indexOf(ne)-xe.indexOf(we)),Ue=Array.from(M).filter(ne=>!xe.includes(ne));Q({categories:[...ee,...Ue],difficulties:[...Oe,...oe],types:[...Pe,...Le]})}}catch(U){console.error("Âä†ËΩΩÁ≠õÈÄâÈÄâÈ°πÂ§±Ë¥•:",U)}};if(I)return e(P,{sx:{width:"100%",mt:4},children:e(Be,{})});const q=()=>{n("/practice")},he=()=>{const U=new URLSearchParams;T.categories.length>0&&U.set("categories",T.categories.join(",")),T.difficulties&&T.difficulties.length>0&&U.set("difficulty",T.difficulties.join(",")),T.types.length>0&&U.set("types",T.types.join(","));const G=`/practice${U.toString()?"?"+U.toString():""}`;n(G),b(!1)},B=(U,G)=>{D(M=>({...M,categories:G?[...M.categories,U]:M.categories.filter(re=>re!==U)}))},$=(U,G)=>{D(M=>({...M,types:G?[...M.types,U]:M.types.filter(re=>re!==U)}))},j=(U,G)=>{D(M=>({...M,difficulties:G?[...M.difficulties,U]:M.difficulties.filter(re=>re!==U)}))},Y=[{title:"È¢òÂ∫ìÁÆ°ÁêÜ",description:"ÁÆ°ÁêÜÈ¢òÂ∫ìÊñá‰ª∂‰∏éÁªüËÆ°",icon:e(Pr,{sx:{fontSize:40,color:"secondary.main"}}),path:"/generator",color:"secondary"},{title:"ÂºÄÂßãÁªÉ‰π†",description:"ÈöèÊú∫ÊäΩÈ¢òËøõË°åÁªÉ‰π†",icon:e(Bn,{sx:{fontSize:40,color:"primary.main"}}),action:q,color:"primary"},{title:"ÈîôÈ¢òÊú¨",description:`Â§ç‰π†${m}ÈÅìÈîôÈ¢ò`,icon:e(ft,{sx:{fontSize:40,color:"error.main"}}),path:"/wrong-questions",color:"error"},{title:"Êî∂ËóèÂ§π",description:`Êü•Áúã${S}ÈÅìÊî∂ËóèÈ¢òÁõÆ`,icon:e(lt,{sx:{fontSize:40,color:"warning.main"}}),path:"/favorites",color:"warning"}];return g(ye,{maxWidth:"lg",children:[e(P,{sx:{textAlign:"center",mb:6,mt:2},children:e(w,{variant:"h3",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold",fontSize:{xs:"1.6rem",sm:"2.4rem",md:"3rem"},lineHeight:1.05,wordBreak:"break-word"},children:e(P,{component:"span",sx:{display:"inline-block",verticalAlign:"middle"},children:"Ê¨¢Ëøé‰ΩøÁî®Êä§ÁêÜÂ≠¶È¢òÂ∫ìÁ≥ªÁªü"})})}),r&&r.totalQuestions>0&&g(se,{container:!0,spacing:3,sx:{mb:6},children:[e(se,{item:!0,xs:12,md:6,children:e(le,{elevation:2,children:g(ce,{children:[e(w,{variant:"h6",gutterBottom:!0,children:"üìä Â≠¶‰π†ËøõÂ∫¶"}),g(P,{sx:{mb:2},children:[g(w,{variant:"body2",color:"text.secondary",children:["ÊÄªÈ¢òÊï∞: ",r.totalQuestions]}),g(w,{variant:"body2",color:"text.secondary",children:["Ê≠£Á°ÆÁéá: ",(r.averageAccuracy*100).toFixed(1),"%"]}),g(w,{variant:"body2",color:"text.secondary",children:["ÊÄªÁî®Êó∂: ",Math.floor(r.totalTimeSpent/60),"ÂàÜ",r.totalTimeSpent%60,"Áßí"]})]}),e(Be,{variant:"determinate",value:r.averageAccuracy*100,sx:{height:18,borderRadius:4}})]})})}),e(se,{item:!0,xs:12,md:6,children:e(le,{elevation:2,children:g(ce,{children:[e(w,{variant:"h6",gutterBottom:!0,children:"üéØ Â≠¶‰π†ÁõÆÊ†á"}),e(P,{sx:{mb:2},children:g(w,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["È¢òÂ∫ìÊÄªÈáè: ",o,"È¢ò"]})}),e(P,{sx:{display:"flex",gap:1,mb:2},children:e(Se,{label:`ÊÄªËøõÂ∫¶: ${r&&o>0?Math.min(r.totalQuestions/o*100,100).toFixed(1):"0.0"}%`,color:"secondary",size:"small"})}),e(w,{variant:"body2",color:"text.secondary",children:"ÁªßÁª≠Âä™ÂäõÔºÅÊØèÂ§©ÁªÉ‰π†100ÈÅìÈ¢òÔºåËøõÊ≠•ÁúãÂæóËßÅ„ÄÇ"})]})})})]}),e(w,{variant:"h5",gutterBottom:!0,sx:{mb:3},children:"‚ö° Âø´Êç∑Êìç‰Ωú"}),e(se,{container:!0,spacing:3,children:Y.map(U=>e(se,{item:!0,xs:12,sm:6,md:3,children:g(le,{elevation:2,sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"translateY(-4px)",boxShadow:4}},children:[g(ce,{sx:{flex:1,textAlign:"center",pb:1},children:[U.icon,e(w,{variant:"h6",component:"div",sx:{mt:2,mb:1},children:U.title}),e(w,{variant:"body2",color:"text.secondary",children:U.description})]}),e(Dn,{sx:{justifyContent:"center",pb:2},children:e(ae,{size:"small",variant:"contained",color:U.color,onClick:()=>U.action?U.action():n(U.path),startIcon:e(Wr,{}),children:"ËøõÂÖ•"})})]})},U.title))}),r&&r.totalQuestions>10&&g(P,{sx:{mt:6},children:[e(w,{variant:"h5",gutterBottom:!0,children:"üí° Â≠¶‰π†Âª∫ËÆÆ"}),e(Te,{severity:"info",children:g(w,{variant:"body2",children:["ÊÇ®ÁöÑÊ≠£Á°ÆÁéáÊòØ",(r.averageAccuracy*100).toFixed(1),"%„ÄÇ",r.averageAccuracy<.6?"Âª∫ËÆÆÂä†Âº∫Âü∫Á°ÄÁü•ËØÜÂ≠¶‰π†ÔºåÂèØ‰ª•Â§öÂÅö‰∏Ä‰∫õÁÆÄÂçïÈ¢òÁõÆ„ÄÇ":r.averageAccuracy<.8?"Âü∫Á°Ä‰∏çÈîôÔºåÁªßÁª≠ÁªÉ‰π†‰∏≠Á∫ßÈ¢òÁõÆÊèêÂçáÊ∞¥Âπ≥„ÄÇ":"Ë°®Áé∞‰ºòÁßÄÔºÅÂèØ‰ª•ÊåëÊàò‰∏Ä‰∫õÂõ∞ÈöæÈ¢òÁõÆ‰∫Ü„ÄÇ"]})})]}),g(ur,{open:d,onClose:()=>b(!1),maxWidth:"md",fullWidth:!0,children:[e(dr,{children:"ÈÄâÊã©ÁªÉ‰π†ËåÉÂõ¥"}),e(fr,{children:g(P,{sx:{pt:1},children:[g(Ye,{component:"fieldset",sx:{mb:3},children:[e(qt,{component:"legend",children:"ÈÄâÊã©ÂàÜÁ±ªÔºàÂèØÂ§öÈÄâÔºâ"}),e(er,{row:!0,children:W.categories.map(U=>e(ot,{control:e(ke,{checked:T.categories.includes(U),onChange:G=>B(U,G.target.checked)}),label:U},U))})]}),e(Sr,{sx:{my:2}}),g(Ye,{component:"fieldset",sx:{mb:3},children:[e(qt,{component:"legend",children:"ÈÄâÊã©ÈöæÂ∫¶ÔºàÂèØÂ§öÈÄâÔºâ"}),e(er,{row:!0,children:W.difficulties.map(U=>e(ot,{control:e(ke,{checked:T.difficulties.includes(U),onChange:G=>j(U,G.target.checked)}),label:U==="easy"?"Âü∫Á°Ä":U==="medium"?"‰∏≠Á≠â":U==="hard"?"Âõ∞Èöæ":U},U))})]}),e(Sr,{sx:{my:2}}),g(Ye,{component:"fieldset",children:[e(qt,{component:"legend",children:"ÈÄâÊã©È¢òÂûãÔºàÂèØÂ§öÈÄâÔºâ"}),e(er,{row:!0,children:W.types.map(U=>e(ot,{control:e(ke,{checked:T.types.includes(U),onChange:G=>$(U,G.target.checked)}),label:U==="single"?"ÂçïÈÄâÈ¢ò":U==="multiple"?"Â§öÈÄâÈ¢ò":U},U))})]})]})}),g(hr,{children:[e(ae,{onClick:()=>b(!1),children:"ÂèñÊ∂à"}),e(ae,{onClick:he,variant:"contained",children:"ÂºÄÂßãÁªÉ‰π†"})]})]})]})},Xi=()=>{var Et,It,Me;const[n,r]=y.useState([]),[i,o]=y.useState(0),[l,m]=y.useState({}),[p,S]=y.useState(!1),[v,I]=y.useState(new Set),[E,d]=y.useState(new Date),[b,W]=y.useState(0),[Q,T]=y.useState(!0),[D,F]=y.useState(""),[z,q]=y.useState(new Set),[he,B]=y.useState({categories:[],difficulties:[],types:[]}),[$,j]=y.useState({categories:[],difficulties:[],types:[]}),[Y,U]=y.useState(null),[G,M]=y.useState(!1),[re,de]=y.useState(null),[pe,_e]=y.useState([]),[Oe,oe]=y.useState({open:!1,message:"",severity:"success"}),[Pe,Le]=y.useState(""),xe=y.useRef(null),ee=y.useRef(null),Ue=y.useRef(null),ne=y.useRef(null),we=new URLSearchParams(window.location.search),Ee=we.get("favorites")==="true"||we.get("mode")==="favorites",be=we.get("mode")==="wrong"||we.get("wrong")==="true",Lt=we.get("high_freq")==="true",He=((Et=we.get("categories"))==null?void 0:Et.split(",").filter(Boolean))||[],Xe=((It=we.get("difficulty"))==null?void 0:It.split(",").filter(Boolean))||[],Ze=((Me=we.get("types"))==null?void 0:Me.split(",").filter(Boolean))||[],Wt=(p||n[i]&&v.has(n[i].id))&&n.length>0&&i<n.length-1;y.useEffect(()=>{kt(),zt();const h=setInterval(()=>{W(A=>A+1)},1e3);return()=>clearInterval(h)},[]),y.useEffect(()=>{Qt(),j({categories:He,difficulties:Xe,types:Ze})},[]);const Qt=async()=>{try{const h=await fetch("/shared-questions.json");if(!h.ok)return;const A=await h.json(),O=new Set,k=new Set,K=new Set;A.forEach(ue=>{O.add(ue.category),k.add(ue.difficulty),K.add(ue.type)});const ge=["Êä§ÁêÜ‰∏ì‰∏öÈ¢ò","Ê≥ïÂæãÊ≥ïËßÑ","ÂÖ¨ÂÖ±Âü∫Á°Ä"],Re=["easy","medium","hard"],Ke=["single","multiple"],jt=Array.from(O).filter(ue=>ge.includes(ue)).sort((ue,Qe)=>ge.indexOf(ue)-ge.indexOf(Qe)),$t=Array.from(O).filter(ue=>!ge.includes(ue)),Mt=Array.from(k).filter(ue=>Re.includes(ue)).sort((ue,Qe)=>Re.indexOf(ue)-Re.indexOf(Qe)),Kt=Array.from(k).filter(ue=>!Re.includes(ue)),Vt=Array.from(K).filter(ue=>Ke.includes(ue)).sort((ue,Qe)=>Ke.indexOf(ue)-Ke.indexOf(Qe)),Yt=Array.from(K).filter(ue=>!Ke.includes(ue));B({categories:[...jt,...$t],difficulties:[...Mt,...Kt],types:[...Vt,...Yt]})}catch(h){console.error("Âä†ËΩΩÁ≠õÈÄâÈÄâÈ°πÂ§±Ë¥•",h)}};y.useEffect(()=>{n.length>0&&i>=n.length&&o(0)},[n,i]);const kt=async()=>{try{let h=[];if(Ee?h=await te.getFavoriteQuestions():be?(h=await te.getWrongQuestions(),Lt&&(h=h.filter(k=>!!k&&(k.wrongCount||0)>=3))):h=await te.getQuestions(),!h||h.length===0)try{const k=await fetch("/shared-questions.json",{cache:"no-store"});if(k.ok){const K=await k.json();Array.isArray(K)&&K.length>0&&(h=K)}}catch(k){console.warn("Âä†ËΩΩÂÖ±‰∫´È¢òÂ∫ìÂ§±Ë¥•Êàñ‰∏çÂ≠òÂú®Ôºö",k)}if(!h||h.length===0){oe({open:!0,message:"È¢òÂ∫ì‰∏∫Á©∫ÔºåËØ∑ÂÖàÁîüÊàêÈ¢òÁõÆ",severity:"warning"}),r([]);return}try{console.info("[Practice] Âä†ËΩΩÂà∞È¢òÁõÆÊï∞Èáè:",h.length),h.length>0&&console.info("[Practice] Á¨¨‰∏ÄÈ¢òÁ§∫‰æã:",h[0])}catch{}if(_e(h),Ie(h,{categories:$.categories,difficulties:$.difficulties,types:$.types}),o(k=>h.length===0||Ee||be||k>=h.length?0:k),Ee||be){m({}),S(!1),d(new Date),W(0);try{await te.clearCurrentSession()}catch{}}const A=await te.getFavoriteQuestions(),O=new Set(A.map(k=>k.id));if(q(O),!Ee&&!be)try{const k=new Set;await Promise.all(h.map(async K=>{const ge=await te.getAnswerRecordsByQuestion(K.id);ge&&ge.length>0&&k.add(K.id)})),I(k)}catch{}else I(new Set)}catch(h){console.error("Âä†ËΩΩÈ¢òÁõÆÂ§±Ë¥•:",h),oe({open:!0,message:"Âä†ËΩΩÈ¢òÁõÆÂ§±Ë¥•",severity:"error"})}finally{T(!1)}},zt=async()=>{try{if(Ee||be)return;const h=await te.getCurrentSession();if(h){if(h.currentQuestionId&&n.length>0){const A=n.findIndex(O=>O.id===h.currentQuestionId);A>=0?o(A):o(h.currentQuestionIndex>=n.length?0:h.currentQuestionIndex)}else o(h.currentQuestionIndex);d(new Date(h.startTime));try{const O=(await te.getAnswerRecords()).reduce((K,ge)=>{const Re=K[ge.questionId];return(!Re||new Date(ge.answeredAt)>new Date(Re.answeredAt))&&(K[ge.questionId]=ge),K},{}),k={};Object.values(O).forEach(K=>{k[K.questionId]=K.userAnswer}),m({...k||{},...h.answers||{}})}catch{m(h.answers)}}}catch(h){console.error("Âä†ËΩΩ‰ºöËØùÂ§±Ë¥•:",h)}},Ie=(h,A)=>{const O=A||$;if((!O.categories||O.categories.length===0)&&(!O.difficulties||O.difficulties.length===0)&&(!O.types||O.types.length===0)){M(!1),de(null),r(h);return}const k=h.filter(K=>!(O.categories&&O.categories.length>0&&!O.categories.includes(K.category)||O.difficulties&&O.difficulties.length>0&&!O.difficulties.includes(K.difficulty)||O.types&&O.types.length>0&&!O.types.includes(K.type)));if(k.length===0){if(Ee||be){U({categories:O.categories||[],difficulties:O.difficulties||[],types:O.types||[]}),M(!0),de("ÊâÄÈÄâÁ≠õÈÄâÂú®ÂΩìÂâç‰∏ìÈ°πÈõÜÂêà‰∏≠Êó†ÂåπÈÖçÈ¢òÁõÆÔºåÂ∑≤ÊòæÁ§∫ËØ•ÈõÜÂêàÂÖ®ÈÉ®È¢òÁõÆ„ÄÇ"),r(h),oe({open:!0,message:"Â∑≤ÂõûÈÄÄ‰∏∫ÊòæÁ§∫ÂÖ®ÈÉ®‰∏ìÈ°πÈ¢òÁõÆ",severity:"info"});return}M(!0),de("ÂΩìÂâçÁ≠õÈÄâÊó†ÂåπÈÖçÈ¢òÁõÆ„ÄÇÊÇ®ÂèØ‰ª•Ê∏ÖÈô§Á≠õÈÄâÊàñÊòæÁ§∫ÂÖ®ÈÉ®È¢òÂ∫ì„ÄÇ"),r([]),oe({open:!0,message:"Êú™ÊâæÂà∞ÂåπÈÖçÈ¢òÁõÆ",severity:"warning"});return}M(!1),de(null),r(k)};y.useEffect(()=>{Ie(pe)},[$,pe]);const ht=y.useCallback(async()=>{var h;try{const A=((h=n[i])==null?void 0:h.id)||"";await te.saveCurrentSession({currentQuestionIndex:i,currentQuestionId:A,answers:l,startTime:E.toISOString()})}catch(A){console.error("‰øùÂ≠ò‰ºöËØùÂ§±Ë¥•:",A)}},[i,l,E]);y.useEffect(()=>{ht()},[ht]);const $e=(h,A)=>{m(O=>({...O,[h]:A}))},We=()=>{if(i<n.length-1){const h=i+1,A=n[h];o(h),S(!!A&&v.has(A.id)),F("")}},qe=()=>{if(i>0){const h=i-1,A=n[h];o(h),S(!!A&&v.has(A.id)),F("")}},et=async()=>{const h=n[i],A=l[h.id];if(!A){oe({open:!0,message:"ËØ∑ÂÖàÈÄâÊã©Á≠îÊ°à",severity:"warning"});return}S(!0);const O=Array.isArray(A)?JSON.stringify(A.sort())===JSON.stringify(h.correctAnswer.sort()):A===h.correctAnswer,k={questionId:h.id,userAnswer:A,isCorrect:O,answeredAt:new Date().toISOString(),timeSpent:b};try{await te.saveAnswerRecord(k),await te.updateStudyStats(h,O,b),O||await te.saveWrongQuestion(h),I(K=>new Set(K).add(h.id))}catch(K){console.error("‰øùÂ≠òÁ≠îÈ¢òËÆ∞ÂΩïÂ§±Ë¥•:",K)}},tt=async()=>{const h=n[i],A=z.has(h.id);try{if(A)if(await te.removeFavoriteQuestion(h.id),q(O=>{const k=new Set(O);return k.delete(h.id),k}),Ee){const O=n.filter(k=>k.id!==h.id);O.length===0?(oe({open:!0,message:"ÊÇ®Â∑≤Ê≤°ÊúâÊî∂ËóèÈ¢òÁõÆÔºåÊ≠£Âú®ÂàáÊç¢Âà∞ÂÖ®ÈÉ®ÁªÉ‰π†Âπ∂Â±ïÁ§∫ÂÖ®ÈÉ®È¢òÁõÆ",severity:"info"}),r(pe),o(0),M(!1),U(null),setTimeout(()=>{try{window.location.href="/practice"}catch{}},2e3)):(r(O),i>=O.length&&o(Math.max(0,O.length-1)),oe({open:!0,message:"Â∑≤‰ªéÊî∂Ëóè‰∏≠ÁßªÈô§ÔºåÊ≠§È¢òÂ∑≤‰ªéÁªÉ‰π†‰∏≠Âà†Èô§",severity:"success"}))}else oe({open:!0,message:"Â∑≤‰ªéÊî∂Ëóè‰∏≠ÁßªÈô§",severity:"info"});else await te.saveFavoriteQuestion(h),q(O=>new Set([...O,h.id])),oe({open:!0,message:"Â∑≤Ê∑ªÂä†Âà∞Êî∂Ëóè",severity:"success"})}catch(O){console.error("Êìç‰ΩúÊî∂ËóèÂ§±Ë¥•:",O),oe({open:!0,message:"Êìç‰ΩúÂ§±Ë¥•ÔºåËØ∑ÈáçËØï",severity:"error"})}},mt=async()=>{const h=n[i];try{await te.removeWrongQuestion(h.id);const A=n.filter(O=>O.id!==h.id);be?A.length===0?(oe({open:!0,message:"ÊÇ®Â∑≤Ê≤°ÊúâÈîôÈ¢òÔºåÊ≠£Âú®ÂàáÊç¢Âà∞ÂÖ®ÈÉ®ÁªÉ‰π†Âπ∂Â±ïÁ§∫ÂÖ®ÈÉ®È¢òÁõÆ",severity:"info"}),r(pe),o(0),M(!1),U(null),setTimeout(()=>{try{window.location.href="/practice"}catch{}},2e3)):(r(A),i>=A.length&&o(Math.max(0,A.length-1)),oe({open:!0,message:"Â∑≤‰ªéÈîôÈ¢òÊú¨‰∏≠ÁßªÈô§",severity:"success"})):(r(A),i>=A.length&&o(Math.max(0,A.length-1)),oe({open:!0,message:"Â∑≤‰ªéÈîôÈ¢òÊú¨‰∏≠ÁßªÈô§",severity:"success"}))}catch(A){console.error("ÁßªÈô§ÈîôÈ¢òÂ§±Ë¥•:",A),oe({open:!0,message:"ÁßªÈô§Â§±Ë¥•ÔºåËØ∑ÈáçËØï",severity:"error"})}},gt=()=>{let h=parseInt(Pe,10);isNaN(h)||h<1?h=1:h>n.length&&(h=n.length),Le(h.toString());const A=h-1,O=n[A];if(o(A),S(!!O&&v.has(O.id)),F(""),oe({open:!0,message:`Â∑≤Ë∑≥ËΩ¨Âà∞Á¨¨ ${h} È¢ò`,severity:"success"}),typeof window<"u"&&window.innerWidth<=600){try{xe.current&&xe.current.blur()}catch{}const k=window.visualViewport;if(k&&ee.current){try{k.removeEventListener("resize",ee.current)}catch{}ee.current=null}yt()}setTimeout(()=>{Le("")},150)},vt=()=>{if(typeof window>"u"||!(window.innerWidth<=600))return;const A=window.visualViewport;if(A){try{Ue.current=A.height,ee.current&&(A.removeEventListener("resize",ee.current),ee.current=null);const O=()=>{try{const k=Ue.current||0;A.height<k-80?(xe.current&&xe.current.scrollIntoView({behavior:"smooth",block:"center"}),ee.current&&(A.removeEventListener("resize",ee.current),ee.current=null)):Ue.current=A.height}catch{}};ee.current=O,A.addEventListener("resize",O)}catch{}setTimeout(()=>{try{xe.current&&xe.current.scrollIntoView({behavior:"smooth",block:"center"})}catch{}},100)}else setTimeout(()=>{try{xe.current&&xe.current.scrollIntoView({behavior:"smooth",block:"center"})}catch{}},120)},pt=()=>{const h=window.visualViewport;if(h&&ee.current){try{h.removeEventListener("resize",ee.current)}catch{}ee.current=null}},yt=()=>{if(typeof window>"u"||window.innerWidth>600)return;const h=()=>{try{ne.current?ne.current.scrollIntoView({behavior:"smooth",block:"start"}):window.scrollTo({top:0,behavior:"smooth"})}catch{}},A=window.visualViewport;if(A){const O=A.height,k=()=>{try{if(A.height>O+60){h();try{A.removeEventListener("resize",k)}catch{}}}catch{}};try{A.addEventListener("resize",k)}catch{}setTimeout(h,120),setTimeout(h,300),setTimeout(()=>{try{A.removeEventListener("resize",k)}catch{}},2e3)}else setTimeout(h,120),setTimeout(h,300),setTimeout(h,600)};y.useEffect(()=>()=>{const h=window.visualViewport;if(h&&ee.current){try{h.removeEventListener("resize",ee.current)}catch{}ee.current=null}},[]),y.useEffect(()=>{if(Ee||be)return;const h=n[i];h&&(v.has(h.id)?(S(!0),(l[h.id]===void 0||l[h.id]===null||Array.isArray(l[h.id])&&l[h.id].length===0||l[h.id]==="")&&(async()=>{try{const A=await te.getAnswerRecordsByQuestion(h.id);if(A&&A.length>0){const O=A.reduce((k,K)=>new Date(k.answeredAt)>new Date(K.answeredAt)?k:K);m(k=>({...k,[h.id]:O.userAnswer}))}}catch{}})()):S(!1))},[v,i,n,Ee,be]);const rt=()=>{oe({...Oe,open:!1})},xt=()=>{Y&&(j(Y),Ie(pe,Y),M(!1),U(null),de(null))},wt=()=>{j({categories:[],difficulties:[],types:[]}),Ie(pe,{categories:[],difficulties:[],types:[]}),M(!1),U(null),de(null)};if(Q)return g(ye,{maxWidth:"md",sx:{textAlign:"center",mt:4},children:[e(w,{variant:"h6",children:"Âä†ËΩΩÈ¢òÁõÆ‰∏≠..."}),e(Be,{sx:{mt:2}})]});if(n.length===0&&!G)return g(ye,{maxWidth:"md",sx:{textAlign:"center",mt:4},children:[e(w,{variant:"h5",gutterBottom:!0,children:"üìö È¢òÂ∫ì‰∏∫Á©∫"}),e(w,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"ËØ∑ÂÖàÊ∑ªÂä†È¢òÁõÆÂà∞È¢òÂ∫ìÊâçËÉΩÂºÄÂßãÁªÉ‰π†"}),e(ae,{variant:"contained",size:"large",href:"/generator",children:"ÂâçÂæÄÈ¢òÂ∫ìÁÆ°ÁêÜ"})]});const J=n[i]||null,Ce=J?l[J.id]:null;if(!J)return e(ye,{maxWidth:"md",sx:{textAlign:"center",mt:4},children:e(w,{variant:"h6",children:"Ê≠£Âú®ÂáÜÂ§áÈ¢òÁõÆÔºåËØ∑Á®çÂÄô..."})});const bt=(i+1)/n.length*100,St=()=>{if(Ee||be)return null;const h=[];if(He.length>0&&h.push(`ÂàÜÁ±ª: ${He.join(", ")}`),Xe.length>0){const A=Xe.map(O=>O==="easy"?"Âü∫Á°Ä":O==="medium"?"‰∏≠Á≠â":O==="hard"?"Âõ∞Èöæ":O);h.push(`ÈöæÂ∫¶: ${A.join(", ")}`)}if(Ze.length>0){const A=Ze.map(O=>O==="single"?"ÂçïÈÄâÈ¢ò":O==="multiple"?"Â§öÈÄâÈ¢ò":O);h.push(`È¢òÂûã: ${A.join(", ")}`)}return h.length>0?e(P,{sx:{mb:2,p:2,bgcolor:"background.paper",borderRadius:1,border:"1px solid",borderColor:"divider"},children:g(w,{variant:"body2",color:"text.secondary",children:[e("strong",{children:"ÁªÉ‰π†ËåÉÂõ¥:"})," ",h.join(" | ")]})}):null},nt=()=>!G||!re?null:e(P,{sx:{mb:2},children:e(Te,{severity:"warning",action:g(P,{children:[Y&&e(ae,{color:"inherit",size:"small",onClick:xt,children:"ÊÅ¢Â§çÁ≠õÈÄâ"}),e(ae,{color:"inherit",size:"small",onClick:wt,children:"Ê∏ÖÈô§Á≠õÈÄâ"})]}),children:re})});return g(ye,{maxWidth:"md",ref:ne,children:[St(),nt(),g(P,{sx:{mb:3},children:[g(P,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[g(w,{variant:"body2",color:"text.secondary",children:["È¢òÁõÆ ",i+1," / ",n.length]}),g(P,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(Qr,{sx:{fontSize:16}}),g(w,{variant:"body2",color:"text.secondary",children:[Math.floor(b/60),":",(b%60).toString().padStart(2,"0")]})]})]}),e(Be,{variant:"determinate",value:bt,sx:{height:8,borderRadius:4}})]}),g(P,{sx:{mb:2,display:"flex",gap:2,alignItems:"center",flexWrap:"wrap",flexDirection:{xs:"column",sm:"row"}},children:[g(Ye,{sx:{minWidth:{xs:"100%",sm:220}},children:[e(tr,{id:"filter-category-label",children:"ËÄÉÈ¢òÂàÜÁ±ª"}),e(rr,{labelId:"filter-category-label",multiple:!0,value:$.categories,onChange:h=>j(A=>({...A,categories:typeof h.target.value=="string"?h.target.value.split(","):h.target.value})),input:e(nr,{label:"ËÄÉÈ¢òÂàÜÁ±ª"}),renderValue:h=>h.join(", "),children:he.categories.map(h=>g(Tt,{value:h,children:[e(ke,{checked:$.categories.indexOf(h)>-1}),e(ir,{primary:h})]},h))})]}),g(Ye,{sx:{minWidth:{xs:"100%",sm:220}},children:[e(tr,{id:"filter-difficulty-label",children:"ËÄÉÈ¢òÈöæÂ∫¶"}),e(rr,{labelId:"filter-difficulty-label",multiple:!0,value:$.difficulties,onChange:h=>j(A=>({...A,difficulties:typeof h.target.value=="string"?h.target.value.split(","):h.target.value})),input:e(nr,{label:"ËÄÉÈ¢òÈöæÂ∫¶"}),renderValue:h=>h.map(A=>A==="easy"?"Âü∫Á°Ä":A==="medium"?"‰∏≠Á≠â":A==="hard"?"Âõ∞Èöæ":A).join(", "),children:he.difficulties.map(h=>g(Tt,{value:h,children:[e(ke,{checked:$.difficulties.indexOf(h)>-1}),e(ir,{primary:h==="easy"?"Âü∫Á°Ä":h==="medium"?"‰∏≠Á≠â":h==="hard"?"Âõ∞Èöæ":h})]},h))})]}),g(Ye,{sx:{minWidth:{xs:"100%",sm:220}},children:[e(tr,{id:"filter-type-label",children:"ËÄÉÈ¢òÈ¢òÂûã"}),e(rr,{labelId:"filter-type-label",multiple:!0,value:$.types,onChange:h=>j(A=>({...A,types:typeof h.target.value=="string"?h.target.value.split(","):h.target.value})),input:e(nr,{label:"ËÄÉÈ¢òÈ¢òÂûã"}),renderValue:h=>h.map(A=>A==="single"?"ÂçïÈÄâÈ¢ò":A==="multiple"?"Â§öÈÄâÈ¢ò":A).join(", "),children:he.types.map(h=>g(Tt,{value:h,children:[e(ke,{checked:$.types.indexOf(h)>-1}),e(ir,{primary:h==="single"?"ÂçïÈÄâÈ¢ò":h==="multiple"?"Â§öÈÄâÈ¢ò":h})]},h))})]})]}),(Ee||be)&&e(P,{sx:{display:"flex",justifyContent:"flex-end",mb:2},children:e(ae,{variant:"outlined",size:"small",onClick:()=>{window.location.href="/practice"},children:"ÂàáÊç¢Âà∞ÂÖ®ÈÉ®È¢òÂ∫ì"})}),e(le,{elevation:3,sx:{mb:3},children:g(ce,{children:[g(P,{sx:{display:"flex",gap:1,mb:2,flexWrap:"wrap",alignItems:"center"},children:[e(Se,{label:J.category,size:"small",color:"primary"}),e(Se,{label:J.difficulty==="easy"?"Âü∫Á°Ä":J.difficulty==="medium"?"‰∏≠Á≠â":"Âõ∞Èöæ",size:"small",color:J.difficulty==="easy"?"success":J.difficulty==="medium"?"warning":"error"}),e(Se,{label:J.type==="single"?"ÂçïÈÄâ":J.type==="multiple"?"Â§öÈÄâ":"Â°´Á©∫",size:"small"}),e(dt,{size:"small",onClick:be?mt:tt,sx:{ml:"auto"},color:be?"error":z.has(J.id)?"secondary":"default",children:be?e(mr,{}):z.has(J.id)?e(lt,{}):e(Un,{})})]}),e(w,{variant:"h6",gutterBottom:!0,sx:{lineHeight:1.6},children:J.content}),J.options&&e(P,{sx:{mt:3},children:J.type==="single"?e(Fn,{value:Ce||"",onChange:h=>$e(J.id,h.target.value),children:J.options.map((h,A)=>e(ot,{value:h.charAt(0),control:e(Pn,{disabled:p}),label:h,sx:{"& .MuiFormControlLabel-label":{width:"100%"}}},A))}):J.type==="multiple"?e(P,{children:J.options.map((h,A)=>e(ot,{control:e(ke,{checked:(Ce==null?void 0:Ce.includes(h.charAt(0)))||!1,onChange:O=>{const k=Ce||[],K=h.charAt(0);let ge;O.target.checked?ge=[...k,K]:ge=k.filter(Re=>Re!==K),$e(J.id,ge)},disabled:p}),label:h},A))}):e(Ot,{fullWidth:!0,placeholder:"ËØ∑ËæìÂÖ•Á≠îÊ°à",value:Ce||"",onChange:h=>$e(J.id,h.target.value),disabled:p})}),p&&g(P,{sx:{mt:3,p:2,bgcolor:"background.paper",borderRadius:1},children:[e(P,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:(()=>{const h=l[J.id];let A=!1;if(Array.isArray(h)){const O=Array.isArray(J.correctAnswer)?J.correctAnswer:[J.correctAnswer];A=JSON.stringify([...h].sort())===JSON.stringify([...O].sort())}else A=h===J.correctAnswer;return A?g(st,{children:[e(kr,{color:"success"})," ",e(w,{color:"success.main",fontWeight:"bold",children:"ÂõûÁ≠îÊ≠£Á°Æ"})]}):g(st,{children:[e(ft,{color:"error"})," ",e(w,{color:"error.main",fontWeight:"bold",children:"ÂõûÁ≠îÈîôËØØ"})]})})()}),g(w,{variant:"body1",sx:{mb:1},children:[e("strong",{children:"Ê≠£Á°ÆÁ≠îÊ°àÔºö"}),Array.isArray(J.correctAnswer)?J.correctAnswer.join(", "):J.correctAnswer]}),g(w,{variant:"body2",color:"text.secondary",children:[e("strong",{children:"È¢òÁõÆËß£ÊûêÔºö"}),J.explanation]})]})]})}),g(P,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,flexDirection:{xs:"column",sm:"row"},gap:2},children:[g(P,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:{xs:"nowrap",sm:"wrap"},width:{xs:"100%",sm:"auto"},justifyContent:{xs:"space-between",sm:"flex-start"}},children:[e(ae,{variant:"outlined",startIcon:e(Ln,{}),onClick:qe,disabled:i===0,sx:{width:{xs:"30%",sm:"auto"},height:{xs:40,sm:"auto"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",order:{xs:1,sm:1}},children:"‰∏ä‰∏ÄÈ¢ò"}),g(P,{sx:{display:"flex",alignItems:"center",gap:1,ml:{xs:0,sm:2},width:{xs:"30%",sm:"auto"},justifyContent:{xs:"center",sm:"flex-start"},order:{xs:2,sm:3}},children:[e(w,{variant:"body2",color:"text.secondary",sx:{display:{xs:"none",sm:"block"}},children:"Ë∑≥ËΩ¨Âà∞Á¨¨"}),e(Ot,{type:"number",size:"small",value:Pe,onChange:h=>Le(h.target.value),inputRef:xe,onFocus:vt,onBlur:pt,onKeyPress:h=>{h.key==="Enter"&&gt()},placeholder:`1-${n.length}`,sx:{width:{xs:"100%",sm:100},"& .MuiInputBase-root":{height:{xs:40,sm:36}},input:{textAlign:"center"}}}),e(w,{variant:"body2",color:"text.secondary",sx:{display:{xs:"none",sm:"block"}},children:"È¢ò"})]}),e(ae,{variant:"outlined",startIcon:e(Er,{}),onClick:We,disabled:!Wt||i===n.length-1,sx:{width:{xs:"30%",sm:"auto"},height:{xs:40,sm:"auto"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",order:{xs:3,sm:2}},children:"‰∏ã‰∏ÄÈ¢ò"})]}),e(P,{sx:{width:{xs:"100%",sm:"auto"}},children:p?e(P,{children:e(ae,{variant:"contained",startIcon:e(Er,{}),onClick:We,disabled:i===n.length-1,sx:{width:{xs:"100%",sm:"auto"}},children:"‰∏ã‰∏ÄÈ¢ò"})}):e(ae,{variant:"contained",color:"primary",onClick:et,disabled:!Ce||Array.isArray(Ce)&&Ce.length===0,sx:{width:{xs:"100%",sm:"auto"}},children:"Êèê‰∫§Á≠îÊ°à"})})]}),g(ur,{open:!!D,onClose:()=>F(""),maxWidth:"md",fullWidth:!0,children:[e(dr,{children:"ü§ñ AIÊô∫ËÉΩËß£Êûê"}),e(fr,{children:e(w,{variant:"body1",sx:{whiteSpace:"pre-wrap",lineHeight:1.6},children:D})}),e(hr,{children:e(ae,{onClick:()=>F(""),children:"ÂÖ≥Èó≠"})})]}),e(gr,{open:Oe.open,autoHideDuration:3e3,onClose:rt,anchorOrigin:{vertical:"top",horizontal:"center"},children:e(Te,{onClose:rt,severity:Oe.severity,children:Oe.message})})]})},Zi=()=>{const n=(F,z)=>Array.isArray(F)?F.join(", "):F,[r,i]=y.useState([]),[o,l]=y.useState(null),[m,p]=y.useState(""),[S]=y.useState(!1),[v,I]=y.useState(!0),[E,d]=y.useState({open:!1,message:""});y.useEffect(()=>{b()},[]);const b=async()=>{try{const F=await te.getWrongQuestions();F.sort((z,q)=>z.wrongCount!==q.wrongCount?q.wrongCount-z.wrongCount:new Date(q.lastWrongTime).getTime()-new Date(z.lastWrongTime).getTime()),i(F)}catch(F){console.error("Âä†ËΩΩÈîôÈ¢òÂ§±Ë¥•:",F)}finally{I(!1)}},W=async F=>{try{await te.removeWrongQuestion(F),i(z=>z.filter(q=>q.id!==F))}catch(z){console.error("ÁßªÈô§ÈîôÈ¢òÂ§±Ë¥•:",z)}},Q=()=>{l(null),p("")},T=()=>{window.location.href="/practice?mode=wrong"},D=()=>{if(r.filter(z=>z.wrongCount>=3).length===0){d({open:!0,message:"ÂΩìÂâçÊ≤°ÊúâÈ´òÈ¢ëÈîôÈ¢òÔºàÈîôËØØÊ¨°Êï∞ ‚â• 3Ôºâ"});return}window.location.href="/practice?mode=wrong&high_freq=true"};return v?g(ye,{maxWidth:"lg",sx:{mt:4},children:[e(Be,{}),e(w,{sx:{mt:2,textAlign:"center"},children:"Âä†ËΩΩÈîôÈ¢ò‰∏≠..."})]}):g(ye,{maxWidth:"lg",children:[g(P,{sx:{mb:4},children:[e(w,{variant:"h4",component:"h1",gutterBottom:!0,children:"üìù ÊàëÁöÑÈîôÈ¢òÊú¨"}),e(w,{variant:"body1",color:"text.secondary",children:"ËÆ∞ÂΩïÊÇ®ÁöÑÈîôÈ¢òÔºåÂº∫ÂåñËÆ∞ÂøÜÔºåÈíàÂØπÊÄßÂ§ç‰π†"})]}),r.length===0?e(le,{elevation:2,sx:{textAlign:"center",py:6},children:g(ce,{children:[e(ft,{sx:{fontSize:64,color:"success.main",mb:2,opacity:.5}}),e(w,{variant:"h5",gutterBottom:!0,children:"üéâ Â§™Ê£í‰∫ÜÔºÅ"}),e(w,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"ÊÇ®ËøòÊ≤°ÊúâÈîôÈ¢òËÆ∞ÂΩïÔºåËØ¥ÊòéÂ≠¶‰π†ÊïàÊûúÂæàÂ•ΩÔºÅ"}),e(ae,{variant:"contained",size:"large",href:"/practice",children:"ÁªßÁª≠ÁªÉ‰π†"})]})}):g(st,{children:[g(se,{container:!0,spacing:3,sx:{mb:4},children:[e(se,{item:!0,xs:12,md:4,children:e(le,{elevation:2,children:g(ce,{sx:{textAlign:"center"},children:[e(w,{variant:"h4",color:"error.main",sx:{fontWeight:"bold"},children:r.length}),e(w,{variant:"body2",color:"text.secondary",children:"ÈîôÈ¢òÊï∞Èáè"})]})})}),e(se,{item:!0,xs:12,md:4,children:e(le,{elevation:2,children:g(ce,{sx:{textAlign:"center"},children:[e(w,{variant:"h4",color:"warning.main",sx:{fontWeight:"bold"},children:r.reduce((F,z)=>F+z.wrongCount,0)}),e(w,{variant:"body2",color:"text.secondary",children:"Á¥ØËÆ°ÈîôËØØÊ¨°Êï∞"})]})})}),e(se,{item:!0,xs:12,md:4,children:e(le,{elevation:2,children:g(ce,{sx:{textAlign:"center"},children:[e(w,{variant:"h4",color:"info.main",sx:{fontWeight:"bold"},children:r.filter(F=>F.wrongCount>=3).length}),e(w,{variant:"body2",color:"text.secondary",children:"È´òÈ¢ëÈîôÈ¢ò"})]})})})]}),g(P,{sx:{mb:4},children:[g(P,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:0}},children:[g(w,{variant:"h6",children:["ÈîôÈ¢òÂàóË°® (",r.length,")"]}),g(P,{sx:{display:"flex",gap:1,mt:{xs:1,sm:0},justifyContent:"flex-end",width:{xs:"100%",sm:"auto"},flexWrap:"wrap"},children:[e(ae,{variant:"contained",startIcon:e(Ir,{}),onClick:D,color:"primary",sx:{mr:{xs:0,sm:1},width:{xs:"48%",sm:"auto"}},children:"È´òÈ¢ëÈîôÈ¢ò"}),e(ae,{variant:"contained",startIcon:e(cr,{}),onClick:T,color:"warning",sx:{width:{xs:"48%",sm:"auto"}},children:"‰∏ìÈ°πÁªÉ‰π†"})]})]}),r.map((F,z)=>e(le,{elevation:1,sx:{mb:2,mx:{xs:-2,sm:0}},children:g(ce,{children:[g(P,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[g(P,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e(Se,{label:`#${z+1}`,size:"small"}),e(Se,{label:F.category,size:"small",color:"primary"}),e(Se,{label:F.difficulty==="easy"?"ÁÆÄÂçï":F.difficulty==="medium"?"‰∏≠Á≠â":"Âõ∞Èöæ",size:"small",color:F.difficulty==="easy"?"success":F.difficulty==="medium"?"warning":"error"}),e(Se,{label:`Èîô${F.wrongCount}Ê¨°`,size:"small",color:"error",variant:F.wrongCount>=3?"filled":"outlined"})]}),e(P,{children:e(zr,{title:"ÁßªÈô§",children:e(dt,{size:"small",onClick:()=>W(F.id),color:"error",children:e(mr,{})})})})]}),e(w,{variant:"h6",gutterBottom:!0,sx:{lineHeight:1.6},children:F.content}),F.options&&e(P,{sx:{ml:2,mb:2},children:F.options.map((q,he)=>e(w,{variant:"body2",sx:{mb:.5},children:q},he))}),g(P,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[g(w,{variant:"body1",color:"primary",sx:{fontWeight:"bold"},children:["Ê≠£Á°ÆÁ≠îÊ°à: ",n(F.correctAnswer,F.type)]}),g(w,{variant:"caption",color:"text.secondary",children:["ÊúÄÂêéÈîôËØØ: ",new Date(F.lastWrongTime).toLocaleDateString()]})]}),g(w,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[e("strong",{children:"Ëß£Êûê:"})," ",F.explanation]})]})},F.id))]}),g(Te,{severity:"info",icon:!1,sx:{textAlign:"left"},children:[e(w,{variant:"subtitle2",gutterBottom:!0,children:"üí° Â§ç‰π†Âª∫ËÆÆÔºö"}),g(w,{variant:"body2",children:["‚Ä¢ È´òÈ¢ëÈîôÈ¢òÔºàÈîôËØØ3Ê¨°‰ª•‰∏äÔºâÈúÄË¶ÅÈáçÁÇπÂ§ç‰π†",e("br",{}),"‚Ä¢ Âª∫ËÆÆÊØèÂë®ËøõË°å1-2Ê¨°ÈîôÈ¢ò‰∏ìÈ°πÁªÉ‰π†",e("br",{}),"‚Ä¢ ÂÆöÊúüÊ∏ÖÁêÜÂ∑≤ÁªèÊéåÊè°ÁöÑÈîôÈ¢òÔºå‰øùÊåÅÈîôÈ¢òÊú¨ÁöÑÊúâÊïàÊÄß"]})]}),e(gr,{open:E.open,autoHideDuration:3e3,onClose:()=>d({open:!1,message:""}),anchorOrigin:{vertical:"top",horizontal:"center"},children:e(Te,{onClose:()=>d({open:!1,message:""}),severity:"info",sx:{minWidth:240},children:E.message})})]}),g(ur,{open:!!o,onClose:Q,maxWidth:"md",fullWidth:!0,children:[g(dr,{children:["ü§ñ AIÊô∫ËÉΩËß£Êûê - ",o==null?void 0:o.content.substring(0,50),"..."]}),e(fr,{children:S?g(P,{sx:{display:"flex",alignItems:"center",gap:2,py:4},children:[e(Ir,{sx:{animation:"spin 1s linear infinite"}}),e(w,{children:"AIÊ≠£Âú®ÂàÜÊûê‰∏≠..."})]}):e(w,{variant:"body1",sx:{whiteSpace:"pre-wrap",lineHeight:1.6,mt:2},children:m})}),e(hr,{children:e(ae,{onClick:Q,children:"ÂÖ≥Èó≠"})})]})]})},qi=()=>{const n=(v,I)=>Array.isArray(v)?v.join(", "):v,[r,i]=y.useState([]),[o,l]=y.useState(!0);y.useEffect(()=>{m()},[]);const m=async()=>{try{const v=await te.getFavoriteQuestions();v.sort((I,E)=>new Date(E.addedAt).getTime()-new Date(I.addedAt).getTime()),i(v)}catch(v){console.error("Âä†ËΩΩÊî∂ËóèÈ¢òÁõÆÂ§±Ë¥•:",v)}finally{l(!1)}},p=async v=>{try{await te.removeFavoriteQuestion(v),i(I=>I.filter(E=>E.id!==v))}catch(I){console.error("ÁßªÈô§Êî∂ËóèÂ§±Ë¥•:",I)}},S=()=>{window.location.href="/practice?favorites=true"};return g(ye,{maxWidth:"lg",children:[g(P,{sx:{mb:4},children:[e(w,{variant:"h4",component:"h1",gutterBottom:!0,children:"‚ù§Ô∏è ÊàëÁöÑÊî∂ËóèÂ§π"}),e(w,{variant:"body1",color:"text.secondary",children:"Êî∂ËóèÁöÑÈáçË¶ÅÈ¢òÁõÆÔºåÈöèÊó∂Â§ç‰π†ÔºåÂä†Ê∑±ËÆ∞ÂøÜ"})]}),r.length===0?e(le,{elevation:2,sx:{textAlign:"center",py:6},children:g(ce,{children:[e(lt,{sx:{fontSize:64,color:"warning.main",mb:2,opacity:.5}}),e(w,{variant:"h5",gutterBottom:!0,children:"Êî∂ËóèÂ§πÊòØÁ©∫ÁöÑ"}),e(w,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Âú®ÁªÉ‰π†ËøáÁ®ã‰∏≠ÁÇπÂáª‚ù§Ô∏èÊåâÈíÆÊî∂ËóèÈáçË¶ÅÈ¢òÁõÆ"}),e(ae,{variant:"contained",size:"large",href:"/practice",children:"ÂºÄÂßãÁªÉ‰π†Âπ∂Êî∂Ëóè"})]})}):g(st,{children:[g(se,{container:!0,spacing:3,sx:{mb:4},children:[e(se,{item:!0,xs:12,md:6,children:e(le,{elevation:2,children:g(ce,{sx:{textAlign:"center"},children:[e(w,{variant:"h4",color:"warning.main",sx:{fontWeight:"bold"},children:r.length}),e(w,{variant:"body2",color:"text.secondary",children:"Êî∂ËóèÈ¢òÁõÆÊï∞"})]})})}),e(se,{item:!0,xs:12,md:6,children:e(le,{elevation:2,children:g(ce,{sx:{textAlign:"center"},children:[e(w,{variant:"h4",color:"info.main",sx:{fontWeight:"bold"},children:new Set(r.map(v=>v.category)).size}),e(w,{variant:"body2",color:"text.secondary",children:"Áü•ËØÜÁÇπÂàÜÁ±ª"})]})})})]}),g(P,{sx:{mb:4},children:[g(P,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[g(w,{variant:"h6",children:["Êî∂ËóèÈ¢òÁõÆ (",r.length,")"]}),e(ae,{variant:"contained",startIcon:e(cr,{}),onClick:S,color:"warning",children:"‰∏ìÈ°πÁªÉ‰π†"})]}),r.map((v,I)=>e(le,{elevation:1,sx:{mb:2},children:g(ce,{children:[g(P,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[g(P,{sx:{display:"flex",gap:1,flexWrap:"wrap",alignItems:"center"},children:[e(Se,{label:`#${I+1}`,size:"small"}),e(Se,{label:v.category,size:"small",color:"primary"}),e(Se,{label:v.difficulty==="easy"?"ÁÆÄÂçï":v.difficulty==="medium"?"‰∏≠Á≠â":"Âõ∞Èöæ",size:"small",color:v.difficulty==="easy"?"success":v.difficulty==="medium"?"warning":"error"}),e(Se,{icon:e(lt,{sx:{fontSize:14}}),label:`Êî∂Ëóè‰∫é ${new Date(v.addedAt).toLocaleDateString()}`,size:"small",color:"warning",variant:"outlined"})]}),e(P,{children:e(zr,{title:"ÁßªÈô§Êî∂Ëóè",children:e(dt,{size:"small",onClick:()=>p(v.id),color:"error",children:e(mr,{})})})})]}),e(w,{variant:"h6",gutterBottom:!0,sx:{lineHeight:1.6},children:v.content}),v.options&&e(P,{sx:{ml:2,mb:2},children:v.options.map((E,d)=>e(w,{variant:"body2",sx:{mb:.5},children:E},d))}),e(P,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:g(w,{variant:"body1",color:"primary",sx:{fontWeight:"bold"},children:["Ê≠£Á°ÆÁ≠îÊ°à: ",n(v.correctAnswer,v.type)]})}),v.notes&&g(w,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[e("strong",{children:"Á¨îËÆ∞:"})," ",v.notes]}),g(w,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[e("strong",{children:"Ëß£Êûê:"})," ",v.explanation]})]})},v.id))]}),g(Te,{severity:"info",icon:!1,sx:{textAlign:"left"},children:[e(w,{variant:"subtitle2",gutterBottom:!0,children:"üí° ‰ΩøÁî®Âª∫ËÆÆÔºö"}),g(w,{variant:"body2",children:["‚Ä¢ Êî∂ËóèÂØπÊÇ®Êù•ËØ¥ÈáçË¶ÅÊàñÊúâÊåëÊàòÁöÑÈ¢òÁõÆ",e("br",{}),"‚Ä¢ ÂÆöÊúüÂ§ç‰π†Êî∂ËóèÈ¢òÁõÆÔºåÂä†Ê∑±ËÆ∞ÂøÜ",e("br",{}),"‚Ä¢ ‰∏∫Êî∂ËóèÈ¢òÁõÆÊ∑ªÂä†‰∏™‰∫∫Á¨îËÆ∞Ôºå‰æø‰∫éÁêÜËß£",e("br",{}),"‚Ä¢ ‰ΩøÁî®‰∏ìÈ°πÁªÉ‰π†ÂäüËÉΩÈíàÂØπÊî∂ËóèÈ¢òÁõÆËøõË°åÂº∫ÂåñËÆ≠ÁªÉ"]})]})]})]})},ea=()=>{const[n,r]=y.useState(null),[i,o]=y.useState([]),[l,m]=y.useState(!0);y.useEffect(()=>{p()},[]);const p=async()=>{try{const[d,b]=await Promise.all([te.getStudyStats(),te.getAnswerRecords()]);r(d),o(b)}catch(d){console.error("Âä†ËΩΩÁªüËÆ°Êï∞ÊçÆÂ§±Ë¥•:",d)}finally{m(!1)}},S=()=>{const d=new Date,b=new Date(d.getTime()-7*24*60*60*1e3),W=i.filter(D=>new Date(D.answeredAt)>=b),Q=W.filter(D=>D.isCorrect).length,T=W.length;return{recentCorrect:Q,recentTotal:T,recentAccuracy:T>0?Q/T*100:0}},v=()=>n?Object.entries(n.categoryStats).sort(([,d],[,b])=>d.accuracy-b.accuracy).slice(0,3):[];if(l)return g(ye,{maxWidth:"lg",sx:{mt:4},children:[e(w,{variant:"h6",sx:{textAlign:"center"},children:"Âä†ËΩΩÁªüËÆ°Êï∞ÊçÆ‰∏≠..."}),e(Be,{sx:{mt:2}})]});if(!n||n.totalQuestions===0)return e(ye,{maxWidth:"lg",sx:{mt:4},children:e(le,{elevation:2,sx:{textAlign:"center",py:6},children:g(ce,{children:[e(Lr,{sx:{fontSize:64,color:"info.main",mb:2,opacity:.5}}),e(w,{variant:"h5",gutterBottom:!0,children:"ÊöÇÊó†Â≠¶‰π†Êï∞ÊçÆ"}),e(w,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"ÂºÄÂßãÁªÉ‰π†ÂêéÔºåËøôÈáå‰ºöÊòæÁ§∫ÊÇ®ÁöÑÂ≠¶‰π†ÁªüËÆ°‰ø°ÊÅØ"}),e(ae,{variant:"contained",size:"large",href:"/practice",children:"ÂºÄÂßãÁªÉ‰π†"})]})})});const I=S(),E=v();return g(ye,{maxWidth:"lg",children:[g(P,{sx:{mb:4},children:[e(w,{variant:"h4",component:"h1",gutterBottom:!0,children:"üìä Â≠¶‰π†ÁªüËÆ°ÂàÜÊûê"}),e(w,{variant:"body1",color:"text.secondary",children:"ËØ¶ÁªÜ‰∫ÜËß£ÊÇ®ÁöÑÂ≠¶‰π†ËøõÂ∫¶ÂíåÊïàÊûúÔºåÊéåÊè°Â≠¶‰π†Áä∂ÂÜµ"})]}),g(se,{container:!0,spacing:3,sx:{mb:4},children:[e(se,{item:!0,xs:12,md:3,children:e(le,{elevation:2,children:g(ce,{sx:{textAlign:"center"},children:[e(kr,{sx:{fontSize:40,color:"success.main",mb:1}}),e(w,{variant:"h4",color:"success.main",sx:{fontWeight:"bold"},children:n.correctAnswers}),e(w,{variant:"body2",color:"text.secondary",children:"Á≠îÂØπÈ¢òÁõÆ"})]})})}),e(se,{item:!0,xs:12,md:3,children:e(le,{elevation:2,children:g(ce,{sx:{textAlign:"center"},children:[e(ft,{sx:{fontSize:40,color:"error.main",mb:1}}),e(w,{variant:"h4",color:"error.main",sx:{fontWeight:"bold"},children:n.wrongAnswers}),e(w,{variant:"body2",color:"text.secondary",children:"Á≠îÈîôÈ¢òÁõÆ"})]})})}),e(se,{item:!0,xs:12,md:3,children:e(le,{elevation:2,children:g(ce,{sx:{textAlign:"center"},children:[e(Wr,{sx:{fontSize:40,color:"primary.main",mb:1}}),g(w,{variant:"h4",color:"primary.main",sx:{fontWeight:"bold"},children:[(n.averageAccuracy*100).toFixed(1),"%"]}),e(w,{variant:"body2",color:"text.secondary",children:"ÊÄª‰ΩìÊ≠£Á°ÆÁéá"})]})})}),e(se,{item:!0,xs:12,md:3,children:e(le,{elevation:2,children:g(ce,{sx:{textAlign:"center"},children:[e(Qr,{sx:{fontSize:40,color:"info.main",mb:1}}),g(w,{variant:"h4",color:"info.main",sx:{fontWeight:"bold"},children:[Math.floor(n.totalTimeSpent/60),"ÂàÜ"]}),e(w,{variant:"body2",color:"text.secondary",children:"ÊÄªÂ≠¶‰π†Êó∂Èó¥"})]})})})]}),g(se,{container:!0,spacing:3,sx:{mb:4},children:[e(se,{item:!0,xs:12,md:6,children:e(le,{elevation:2,children:g(ce,{children:[e(w,{variant:"h6",gutterBottom:!0,children:"üìà Â≠¶‰π†ËøõÂ∫¶"}),g(P,{sx:{mb:2},children:[e(w,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"ÊÄª‰ΩìÊ≠£Á°ÆÁéá"}),e(Be,{variant:"determinate",value:n.averageAccuracy*100,sx:{height:10,borderRadius:5}}),g(w,{variant:"body2",sx:{mt:1},children:[(n.averageAccuracy*100).toFixed(1),"%"]})]}),e(w,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"ÊúÄËøë7Â§©Ê≠£Á°ÆÁéá"}),e(Be,{variant:"determinate",value:I.recentAccuracy,sx:{height:10,borderRadius:5},color:I.recentAccuracy>=80?"success":I.recentAccuracy>=60?"warning":"error"}),g(w,{variant:"body2",sx:{mt:1},children:[I.recentAccuracy.toFixed(1),"% (",I.recentCorrect,"/",I.recentTotal,")"]})]})})}),e(se,{item:!0,xs:12,md:6,children:e(le,{elevation:2,children:g(ce,{children:[e(w,{variant:"h6",gutterBottom:!0,children:"üéØ Áü•ËØÜÁÇπÊéåÊè°ÊÉÖÂÜµ"}),Object.entries(n.categoryStats).length===0?e(w,{variant:"body2",color:"text.secondary",children:"ÊöÇÊó†ÂàÜÁ±ªÊï∞ÊçÆ"}):Object.entries(n.categoryStats).sort(([,d],[,b])=>b.accuracy-d.accuracy).slice(0,5).map(([d,b])=>g(P,{sx:{mb:2},children:[g(P,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[e(w,{variant:"body2",children:d}),g(w,{variant:"body2",children:[b.accuracy.toFixed(1),"%"]})]}),e(Be,{variant:"determinate",value:b.accuracy,sx:{height:6,borderRadius:3},color:b.accuracy>=80?"success":b.accuracy>=60?"warning":"error"}),g(w,{variant:"caption",color:"text.secondary",children:[b.correct,"/",b.total," Ê≠£Á°Æ"]})]},d))]})})})]}),E.length>0&&g(Te,{severity:"warning",icon:!1,sx:{mb:4,textAlign:"left"},children:[e(w,{variant:"subtitle2",gutterBottom:!0,children:"‚ö†Ô∏è ÈúÄË¶ÅÂä†Âº∫ÁöÑÁü•ËØÜÁÇπÔºö"}),e(P,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:E.map(([d,b])=>e(Se,{label:`${d} (${b.accuracy.toFixed(1)}%)`,color:"warning",size:"small"},d))})]}),g(Te,{severity:"info",icon:!1,sx:{textAlign:"left"},children:[e(w,{variant:"subtitle2",gutterBottom:!0,children:"üí° Êï∞ÊçÆËØ¥ÊòéÔºö"}),g(w,{variant:"body2",children:["‚Ä¢ ÁªüËÆ°Êï∞ÊçÆÂü∫‰∫éÊÇ®ÁöÑÁ≠îÈ¢òËÆ∞ÂΩïÂÆûÊó∂Êõ¥Êñ∞",e("br",{}),"‚Ä¢ Âª∫ËÆÆÂÆöÊúüÊü•ÁúãÂ≠¶‰π†ÁªüËÆ°ÔºåË∞ÉÊï¥Â≠¶‰π†Á≠ñÁï•",e("br",{}),"‚Ä¢ ÂèØ‰ª•ÈÄöËøáÂØºÂá∫ÂäüËÉΩÂ§á‰ªΩÊÇ®ÁöÑÂ≠¶‰π†Êï∞ÊçÆ"]})]})]})},ta=()=>{const n=je();return g(ye,{maxWidth:"md",children:[e(w,{variant:"h4",component:"h1",gutterBottom:!0,children:"Á≥ªÁªüËÆæÁΩÆ"}),e(le,{elevation:2,sx:{mb:3},children:g(ce,{children:[e(w,{variant:"h6",gutterBottom:!0,children:"È¢òÂ∫ìÁÆ°ÁêÜ"}),g(w,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["Á≥ªÁªüÊîØÊåÅÊâãÂä®‰∏ä‰º†È¢òÂ∫ìÊñá‰ª∂ÔºåÈ¢òÂ∫ìÊñá‰ª∂‰Ωç‰∫é ",e("code",{children:"/public/shared-questions.json"}),"„ÄÇ"]}),e(ae,{variant:"contained",onClick:()=>n("/profile"),children:"ÂâçÂæÄ‰∏™‰∫∫‰∏≠ÂøÉÁÆ°ÁêÜÂÖ∂ÂÆÉËÆæÁΩÆ"})]})})]})},ra=()=>{const n=je();Nt.useEffect(()=>{const E=De.getCurrentUser();(!E||E.username!=="admin")&&n("/")},[]);const[r,i]=y.useState({total:0,categories:{},difficulties:{},types:{}}),[o,l]=y.useState(!0),[m,p]=y.useState(null);Nt.useEffect(()=>{S()},[]);const S=async()=>{try{l(!0),p(null);const E=await fetch("/shared-questions.json");if(!E.ok)throw new Error(`Âä†ËΩΩÈ¢òÂ∫ìÊñá‰ª∂Â§±Ë¥•: ${E.status}`);const d=await E.json(),b={},W={},Q={};d.forEach(T=>{b[T.category]=(b[T.category]||0)+1,W[T.difficulty]=(W[T.difficulty]||0)+1,Q[T.type]=(Q[T.type]||0)+1}),i({total:d.length,categories:b,difficulties:W,types:Q})}catch(E){console.error("Âä†ËΩΩÁªüËÆ°‰ø°ÊÅØÂ§±Ë¥•:",E),p(E instanceof Error?E.message:"Âä†ËΩΩÂ§±Ë¥•")}finally{l(!1)}},v=E=>{switch(E){case"easy":return"Âü∫Á°Ä";case"medium":return"‰∏≠Á≠â";case"hard":return"Âõ∞Èöæ";default:return E}},I=E=>{switch(E){case"single":return"ÂçïÈÄâÈ¢ò";case"multiple":return"Â§öÈÄâÈ¢ò";default:return E}};return g(ye,{maxWidth:"lg",children:[e(w,{variant:"h4",component:"h1",gutterBottom:!0,sx:{mb:4},children:"üìö È¢òÂ∫ìÁªüËÆ°‰∏≠ÂøÉ"}),m&&e(Te,{severity:"error",sx:{mb:4},children:m}),e(le,{elevation:2,children:g(ce,{children:[g(w,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e(Wn,{}),"È¢òÂ∫ìÁªüËÆ°‰ø°ÊÅØ"]}),o?e(P,{sx:{display:"flex",justifyContent:"center",py:4},children:e(Qn,{})}):e(P,{sx:{mt:2},children:g(se,{container:!0,spacing:3,children:[e(se,{item:!0,xs:12,sm:6,md:3,children:g(kn,{elevation:1,sx:{p:2,textAlign:"center"},children:[e(w,{variant:"h4",color:"primary",children:r.total}),e(w,{variant:"body2",color:"text.secondary",children:"ÊÄªÈ¢òÁõÆÊï∞"})]})}),g(se,{item:!0,xs:12,children:[e(w,{variant:"subtitle1",gutterBottom:!0,children:"ÂàÜÁ±ªÁªüËÆ°"}),e(P,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:Object.entries(r.categories).map(([E,d])=>e(Se,{label:`${E}: ${d}`,size:"small",color:"secondary"},E))})]}),g(se,{item:!0,xs:12,children:[e(w,{variant:"subtitle1",gutterBottom:!0,children:"ÈöæÂ∫¶ÂàÜÂ∏É"}),e(P,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:Object.entries(r.difficulties).map(([E,d])=>e(Se,{label:`${v(E)}: ${d}`,size:"small",color:"info"},E))})]}),g(se,{item:!0,xs:12,children:[e(w,{variant:"subtitle1",gutterBottom:!0,children:"È¢òÂûãÂàÜÂ∏É"}),e(P,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:Object.entries(r.types).map(([E,d])=>e(Se,{label:`${I(E)}: ${d}`,size:"small",color:"success"},E))})]})]})})]})})]})},na=()=>{const[n,r]=y.useState(null),i=je();y.useState(!1);const[o,l]=y.useState({open:!1,message:""});y.useEffect(()=>{const I=De.getCurrentUser();r(I),I||i("/login")},[]);const m=()=>{De.logout(),i("/login")},p=async()=>{try{const I=await te.exportData(),E=new Blob([I],{type:"application/json"}),d=URL.createObjectURL(E),b=document.createElement("a");b.href=d,b.download=`question-bank-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(d),l({open:!0,message:"ÂØºÂá∫ÊàêÂäü",severity:"success"})}catch{l({open:!0,message:"ÂØºÂá∫Â§±Ë¥•",severity:"error"})}},S=async I=>{var b;const E=(b=I.target.files)==null?void 0:b[0];if(!E)return;const d=new FileReader;d.onload=async W=>{var Q;try{const T=(Q=W.target)==null?void 0:Q.result;await te.importData(T),l({open:!0,message:"ÂØºÂÖ•ÊàêÂäüÔºåÊ≠£Âú®ÈáçËΩΩÈ°µÈù¢‰ª•Â∫îÁî®Êï∞ÊçÆ...",severity:"success"}),setTimeout(()=>window.location.reload(),800)}catch{l({open:!0,message:"ÂØºÂÖ•Â§±Ë¥•ÔºåÊï∞ÊçÆÊ†ºÂºè‰∏çÊ≠£Á°Æ",severity:"error"})}},d.readAsText(E)},v=async()=>{try{await te.clearAllData(),l({open:!0,message:"Â∑≤Ê∏ÖÈô§ÊâÄÊúâÊï∞ÊçÆ",severity:"info"})}catch{l({open:!0,message:"Ê∏ÖÈô§Â§±Ë¥•",severity:"error"})}};return n?g(ye,{maxWidth:"md",children:[g(P,{sx:{mb:4},children:[e(w,{variant:"h4",component:"h1",gutterBottom:!0,children:"‰∏™‰∫∫‰∏≠ÂøÉ"}),e(w,{variant:"body1",color:"text.secondary",children:"ÁÆ°ÁêÜÊÇ®ÁöÑË¥¶Êà∑‰ø°ÊÅØ‰∏é‰∏™‰∫∫ÂÅèÂ•Ω"})]}),e(le,{elevation:2,sx:{mb:3},children:g(ce,{children:[e(w,{variant:"h6",children:"Ë¥¶Êà∑‰ø°ÊÅØ"}),g(w,{variant:"body2",sx:{mb:2},children:["Áî®Êà∑Âêç: ",n.username," ¬∑ ÊòæÁ§∫Âêç: ",n.displayName||n.username]}),e(ae,{variant:"contained",color:"error",onClick:m,children:"ÈÄÄÂá∫ÁôªÂΩï"})]})}),e(le,{elevation:2,sx:{mb:3},children:g(ce,{children:[e(w,{variant:"h6",gutterBottom:!0,children:"Êï∞ÊçÆÁÆ°ÁêÜ"}),e(w,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Â§á‰ªΩ„ÄÅÊÅ¢Â§çÊàñÊ∏ÖÈô§ÊÇ®ÁöÑÂ≠¶‰π†Êï∞ÊçÆ„ÄÇÊâÄÊúâÊï∞ÊçÆ‰øùÂ≠òÂú®Êú¨Âú∞ÊµèËßàÂô®„ÄÇ"}),g(P,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e(ae,{variant:"outlined",onClick:p,children:"ÂØºÂá∫Êï∞ÊçÆ"}),g(ae,{variant:"outlined",component:"label",children:["ÂØºÂÖ•Êï∞ÊçÆ",e("input",{type:"file",accept:".json",hidden:!0,onChange:S})]}),e(ae,{variant:"outlined",color:"error",onClick:v,children:"Ê∏ÖÈô§ÊâÄÊúâÊï∞ÊçÆ"})]})]})}),e(gr,{open:o.open,autoHideDuration:4e3,onClose:()=>l({...o,open:!1}),children:e(Te,{severity:o.severity||"info",children:o.message})})]}):null},ia=()=>{const[n,r]=y.useState(""),[i,o]=y.useState(""),[l,m]=y.useState(!1),[p,S]=y.useState(""),v=je(),I=async()=>{await De.login(n.trim(),i)?v("/"):S("Áî®Êà∑ÂêçÊàñÂØÜÁ†ÅÈîôËØØ")};return e(ye,{maxWidth:"sm",children:g(P,{sx:{mt:8},children:[e(w,{variant:"h4",gutterBottom:!0,children:"ÁôªÂΩï"}),e(w,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"ËØ∑‰ΩøÁî®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂÆö‰πâÁöÑÁî®Êà∑ÁôªÂΩï„ÄÇ"}),p&&e(Te,{severity:"error",sx:{mb:2},children:p}),e(Ot,{fullWidth:!0,label:"Áî®Êà∑Âêç",value:n,onChange:d=>r(d.target.value),sx:{mb:2}}),e(Ot,{fullWidth:!0,label:"ÂØÜÁ†Å",type:l?"text":"password",value:i,onChange:d=>o(d.target.value),onKeyPress:d=>{d.key==="Enter"&&I()},sx:{mb:2},InputProps:{endAdornment:e(zn,{position:"end",children:e(dt,{"aria-label":l?"ÈöêËóèÂØÜÁ†Å":"ÊòæÁ§∫ÂØÜÁ†Å",onClick:()=>m(d=>!d),edge:"end",children:l?e(jn,{}):e($n,{})})})}}),e(ae,{variant:"contained",fullWidth:!0,onClick:I,children:"ÁôªÂΩï"})]})})};function aa(){const n=je(),r=Pt();return y.useEffect(()=>{let i=!0;return De.isAuthenticated().then(o=>{!o&&i&&r.pathname!=="/login"&&n("/login")}),()=>{i=!1}},[r.pathname,n]),g(P,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[e(jr,{}),e(Vi,{}),e(ye,{component:"main",maxWidth:"xl",sx:{flex:1,py:3},children:e("div",{className:"app-container",children:g(ki,{children:[e(Ne,{path:"/",element:e(Hi,{})}),e(Ne,{path:"/practice",element:e(Xi,{})}),e(Ne,{path:"/wrong-questions",element:e(Zi,{})}),e(Ne,{path:"/favorites",element:e(qi,{})}),e(Ne,{path:"/stats",element:e(ea,{})}),e(Ne,{path:"/settings",element:e(ta,{})}),e(Ne,{path:"/generator",element:e(ra,{})}),e(Ne,{path:"/profile",element:e(na,{})}),e(Ne,{path:"/login",element:e(ia,{})})]})})}),e(Yi,{})]})}const oa=Mn({palette:{mode:"light",primary:{main:"#1976d2"},secondary:{main:"#dc004e"}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',h4:{fontWeight:600},h5:{fontWeight:600}},components:{MuiButton:{styleOverrides:{root:{borderRadius:8,textTransform:"none"}}},MuiCard:{styleOverrides:{root:{borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}}}}});or.createRoot(document.getElementById("root")).render(e(Nt.StrictMode,{children:g(Kn,{theme:oa,children:[e(jr,{}),e($i,{children:e(aa,{})})]})}));
